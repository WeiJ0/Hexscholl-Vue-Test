import{i as r,f as a,a as l,h as d}from"./API-0e45865f.js";import{s as c,b as m}from"./Notify-628114b5.js";let u={id:"",info:{name:"",content:"",image:"",isOwner:!1},getID:function(){let e=new URL(window.location.href);this.id=e.searchParams.get("id"),this.id?this.getInfo():c("找不到景點").then(()=>{window.location.href="./index.html"})},getInfo:async function(){let e=await a(this.id);const{isSuccess:n,message:i,view:o}=e;n?(this.info=e.view,this.render(),this.bindEvent()):c(e.message).then(()=>{window.location.href="./index.html"})},render:function(){const{name:e,content:n,image:i,isOwner:o,Collects:s}=this.info;if(document.title=e,document.querySelector("#viewName").textContent=e,document.querySelector("#viewContent").textContent=n,document.querySelector("#viewImage").src=i,!l){document.querySelector("#btnCollect").style.display="none";return}const t=document.querySelector("#btnCollect");s.length>0?(t.textContent="取消收藏",t.classList.add("btn-danger"),t.classList.remove("btn-warning")):(t.textContent="收藏",t.classList.add("btn-warning"),t.classList.remove("btn-danger"))},bindEvent:function(){document.querySelector("#btnCollect").addEventListener("click",n=>{n.preventDefault(),d(this.id).then(i=>{const{isSuccess:o,message:s}=i;if(!o){c(s);return}m(s).then(()=>{this.getInfo()})})})}};const h=()=>{r(l),u.getID()};h();
