function T0(s,t){for(var e=0;e<t.length;e++){const r=t[e];if(typeof r!="string"&&!Array.isArray(r)){for(const n in r)if(n!=="default"&&!(n in s)){const i=Object.getOwnPropertyDescriptor(r,n);i&&Object.defineProperty(s,n,i.get?i:{enumerable:!0,get:()=>r[n]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function e(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=e(n);fetch(n.href,i)}})();const A0=!!localStorage.getItem("userInfo"),hs=()=>A0?null:window.location.href="/index.html",de=()=>JSON.parse(localStorage.getItem("userInfo")),R0=()=>{localStorage.removeItem("userInfo"),window.location.href="./index.html"},O0=window.localStorage.getItem("userInfo")?JSON.parse(window.localStorage.getItem("userInfo")):null,ls=s=>{const t=document.createElement("header");let e="";s?e=`
        <li class="nav-item mx-3">
            <a class="nav-link" href="./admin.html">前往後台</a>
        </li>
        <li class="nav-item mx-3">
            <a class="nav-link" href="./collect.html">收藏列表</a>
        </li>
        <li class="nav-item mx-3 d-flex align-items-center">
            <span class="mb-0 fw-bold h5"> Hello ! ${O0.nickname}</span>
        </li>
        <li class="nav-item mx-3">
            <a id="btnLogout" class="btn btn-outline-danger">登出</a>
        </li>
        `:e=`
        <li class="nav-item mx-3">
            <a id="btnLogin" class="nav-link" href="./signIn.html">登入</a>
        </li>
        <li class="nav-item mx-3">
            <a class="btn btn-primary" href="./signUp.html" role="button">註冊</a>
        </li>
        `,t.innerHTML=`
    <nav class="navbar navbar-expand-lg bg-light">
        <div class="container">
        <a class="navbar-brand" href="./index.html">景點介紹</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                ${e}
            </ul>
        </div>
        </div>
    </nav>
    `,document.body.prepend(t),s&&document.querySelector("#btnLogout").addEventListener("click",R0)},P0="modulepreload",j0=function(s){return"https://weij0.github.io/Hexscholl-Vue-Test/"+s},hr={},Ke=function(t,e,r){if(!e||e.length===0)return t();const n=document.getElementsByTagName("link");return Promise.all(e.map(i=>{if(i=j0(i),i in hr)return;hr[i]=!0;const c=i.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(!!r)for(let a=n.length-1;a>=0;a--){const u=n[a];if(u.href===i&&(!c||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${h}`))return;const o=document.createElement("link");if(o.rel=c?"stylesheet":P0,c||(o.as="script",o.crossOrigin=""),o.href=i,document.head.appendChild(o),c)return new Promise((a,u)=>{o.addEventListener("load",a),o.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t())};var $0=globalThis&&globalThis.__awaiter||function(s,t,e,r){function n(i){return i instanceof e?i:new e(function(c){c(i)})}return new(e||(e=Promise))(function(i,c){function h(a){try{o(r.next(a))}catch(u){c(u)}}function l(a){try{o(r.throw(a))}catch(u){c(u)}}function o(a){a.done?i(a.value):n(a.value).then(h,l)}o((r=r.apply(s,t||[])).next())})};const D0=s=>{let t;return s?t=s:typeof fetch>"u"?t=(...e)=>$0(void 0,void 0,void 0,function*(){return yield(yield Ke(()=>Promise.resolve().then(()=>Xe),void 0)).fetch(...e)}):t=fetch,(...e)=>t(...e)};class Nt extends Error{constructor(t,e="FunctionsError",r){super(t),super.name=e,this.context=r}}class I0 extends Nt{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class H0 extends Nt{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class U0 extends Nt{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var L0=globalThis&&globalThis.__awaiter||function(s,t,e,r){function n(i){return i instanceof e?i:new e(function(c){c(i)})}return new(e||(e=Promise))(function(i,c){function h(a){try{o(r.next(a))}catch(u){c(u)}}function l(a){try{o(r.throw(a))}catch(u){c(u)}}function o(a){a.done?i(a.value):n(a.value).then(h,l)}o((r=r.apply(s,t||[])).next())})};class F0{constructor(t,{headers:e={},customFetch:r}={}){this.url=t,this.headers=e,this.fetch=D0(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,e={}){var r;return L0(this,void 0,void 0,function*(){try{const{headers:n,body:i}=e;let c={},h;i&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=i):typeof i=="string"?(c["Content-Type"]="text/plain",h=i):typeof FormData<"u"&&i instanceof FormData?h=i:(c["Content-Type"]="application/json",h=JSON.stringify(i)));const l=yield this.fetch(`${this.url}/${t}`,{method:"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),n),body:h}).catch(f=>{throw new I0(f)}),o=l.headers.get("x-relay-error");if(o&&o==="true")throw new H0(l);if(!l.ok)throw new U0(l);let a=((r=l.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),u;return a==="application/json"?u=yield l.json():a==="application/octet-stream"?u=yield l.blob():a==="multipart/form-data"?u=yield l.formData():u=yield l.text(),{data:u,error:null}}catch(n){return{data:null,error:n}}})}}var F=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function z0(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function q0(s){var t=s.default;if(typeof t=="function"){var e=function r(){if(this instanceof r){var n=[null];n.push.apply(n,arguments);var i=Function.bind.apply(t,n);return new i}return t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(s).forEach(function(r){var n=Object.getOwnPropertyDescriptor(s,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return s[r]}})}),e}var Le={exports:{}};(function(s,t){var e=typeof self<"u"?self:F,r=function(){function i(){this.fetch=!1,this.DOMException=e.DOMException}return i.prototype=e,new i}();(function(i){(function(c){var h={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};function l(m){return m&&DataView.prototype.isPrototypeOf(m)}if(h.arrayBuffer)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=ArrayBuffer.isView||function(m){return m&&o.indexOf(Object.prototype.toString.call(m))>-1};function u(m){if(typeof m!="string"&&(m=String(m)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(m))throw new TypeError("Invalid character in header field name");return m.toLowerCase()}function f(m){return typeof m!="string"&&(m=String(m)),m}function x(m){var B={next:function(){var I=m.shift();return{done:I===void 0,value:I}}};return h.iterable&&(B[Symbol.iterator]=function(){return B}),B}function d(m){this.map={},m instanceof d?m.forEach(function(B,I){this.append(I,B)},this):Array.isArray(m)?m.forEach(function(B){this.append(B[0],B[1])},this):m&&Object.getOwnPropertyNames(m).forEach(function(B){this.append(B,m[B])},this)}d.prototype.append=function(m,B){m=u(m),B=f(B);var I=this.map[m];this.map[m]=I?I+", "+B:B},d.prototype.delete=function(m){delete this.map[u(m)]},d.prototype.get=function(m){return m=u(m),this.has(m)?this.map[m]:null},d.prototype.has=function(m){return this.map.hasOwnProperty(u(m))},d.prototype.set=function(m,B){this.map[u(m)]=f(B)},d.prototype.forEach=function(m,B){for(var I in this.map)this.map.hasOwnProperty(I)&&m.call(B,this.map[I],I,this)},d.prototype.keys=function(){var m=[];return this.forEach(function(B,I){m.push(I)}),x(m)},d.prototype.values=function(){var m=[];return this.forEach(function(B){m.push(B)}),x(m)},d.prototype.entries=function(){var m=[];return this.forEach(function(B,I){m.push([I,B])}),x(m)},h.iterable&&(d.prototype[Symbol.iterator]=d.prototype.entries);function p(m){if(m.bodyUsed)return Promise.reject(new TypeError("Already read"));m.bodyUsed=!0}function g(m){return new Promise(function(B,I){m.onload=function(){B(m.result)},m.onerror=function(){I(m.error)}})}function w(m){var B=new FileReader,I=g(B);return B.readAsArrayBuffer(m),I}function v(m){var B=new FileReader,I=g(B);return B.readAsText(m),I}function _(m){for(var B=new Uint8Array(m),I=new Array(B.length),L=0;L<B.length;L++)I[L]=String.fromCharCode(B[L]);return I.join("")}function y(m){if(m.slice)return m.slice(0);var B=new Uint8Array(m.byteLength);return B.set(new Uint8Array(m)),B.buffer}function E(){return this.bodyUsed=!1,this._initBody=function(m){this._bodyInit=m,m?typeof m=="string"?this._bodyText=m:h.blob&&Blob.prototype.isPrototypeOf(m)?this._bodyBlob=m:h.formData&&FormData.prototype.isPrototypeOf(m)?this._bodyFormData=m:h.searchParams&&URLSearchParams.prototype.isPrototypeOf(m)?this._bodyText=m.toString():h.arrayBuffer&&h.blob&&l(m)?(this._bodyArrayBuffer=y(m.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):h.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(m)||a(m))?this._bodyArrayBuffer=y(m):this._bodyText=m=Object.prototype.toString.call(m):this._bodyText="",this.headers.get("content-type")||(typeof m=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):h.searchParams&&URLSearchParams.prototype.isPrototypeOf(m)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},h.blob&&(this.blob=function(){var m=p(this);if(m)return m;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(w)}),this.text=function(){var m=p(this);if(m)return m;if(this._bodyBlob)return v(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(_(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},h.formData&&(this.formData=function(){return this.text().then(D)}),this.json=function(){return this.text().then(JSON.parse)},this}var S=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function C(m){var B=m.toUpperCase();return S.indexOf(B)>-1?B:m}function T(m,B){B=B||{};var I=B.body;if(m instanceof T){if(m.bodyUsed)throw new TypeError("Already read");this.url=m.url,this.credentials=m.credentials,B.headers||(this.headers=new d(m.headers)),this.method=m.method,this.mode=m.mode,this.signal=m.signal,!I&&m._bodyInit!=null&&(I=m._bodyInit,m.bodyUsed=!0)}else this.url=String(m);if(this.credentials=B.credentials||this.credentials||"same-origin",(B.headers||!this.headers)&&(this.headers=new d(B.headers)),this.method=C(B.method||this.method||"GET"),this.mode=B.mode||this.mode||null,this.signal=B.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&I)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(I)}T.prototype.clone=function(){return new T(this,{body:this._bodyInit})};function D(m){var B=new FormData;return m.trim().split("&").forEach(function(I){if(I){var L=I.split("="),U=L.shift().replace(/\+/g," "),H=L.join("=").replace(/\+/g," ");B.append(decodeURIComponent(U),decodeURIComponent(H))}}),B}function b(m){var B=new d,I=m.replace(/\r?\n[\t ]+/g," ");return I.split(/\r?\n/).forEach(function(L){var U=L.split(":"),H=U.shift().trim();if(H){var N=U.join(":").trim();B.append(H,N)}}),B}E.call(T.prototype);function k(m,B){B||(B={}),this.type="default",this.status=B.status===void 0?200:B.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in B?B.statusText:"OK",this.headers=new d(B.headers),this.url=B.url||"",this._initBody(m)}E.call(k.prototype),k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},k.error=function(){var m=new k(null,{status:0,statusText:""});return m.type="error",m};var R=[301,302,303,307,308];k.redirect=function(m,B){if(R.indexOf(B)===-1)throw new RangeError("Invalid status code");return new k(null,{status:B,headers:{location:m}})},c.DOMException=i.DOMException;try{new c.DOMException}catch{c.DOMException=function(B,I){this.message=B,this.name=I;var L=Error(B);this.stack=L.stack},c.DOMException.prototype=Object.create(Error.prototype),c.DOMException.prototype.constructor=c.DOMException}function O(m,B){return new Promise(function(I,L){var U=new T(m,B);if(U.signal&&U.signal.aborted)return L(new c.DOMException("Aborted","AbortError"));var H=new XMLHttpRequest;function N(){H.abort()}H.onload=function(){var A={status:H.status,statusText:H.statusText,headers:b(H.getAllResponseHeaders()||"")};A.url="responseURL"in H?H.responseURL:A.headers.get("X-Request-URL");var P="response"in H?H.response:H.responseText;I(new k(P,A))},H.onerror=function(){L(new TypeError("Network request failed"))},H.ontimeout=function(){L(new TypeError("Network request failed"))},H.onabort=function(){L(new c.DOMException("Aborted","AbortError"))},H.open(U.method,U.url,!0),U.credentials==="include"?H.withCredentials=!0:U.credentials==="omit"&&(H.withCredentials=!1),"responseType"in H&&h.blob&&(H.responseType="blob"),U.headers.forEach(function(A,P){H.setRequestHeader(P,A)}),U.signal&&(U.signal.addEventListener("abort",N),H.onreadystatechange=function(){H.readyState===4&&U.signal.removeEventListener("abort",N)}),H.send(typeof U._bodyInit>"u"?null:U._bodyInit)})}return O.polyfill=!0,i.fetch||(i.fetch=O,i.Headers=d,i.Request=T,i.Response=k),c.Headers=d,c.Request=T,c.Response=k,c.fetch=O,Object.defineProperty(c,"__esModule",{value:!0}),c})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var n=r;t=n.fetch,t.default=n.fetch,t.fetch=n.fetch,t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response,s.exports=t})(Le,Le.exports);const Wt=z0(Le.exports),Xe=T0({__proto__:null,default:Wt},[Le.exports]);var N0=globalThis&&globalThis.__awaiter||function(s,t,e,r){function n(i){return i instanceof e?i:new e(function(c){c(i)})}return new(e||(e=Promise))(function(i,c){function h(a){try{o(r.next(a))}catch(u){c(u)}}function l(a){try{o(r.throw(a))}catch(u){c(u)}}function o(a){a.done?i(a.value):n(a.value).then(h,l)}o((r=r.apply(s,t||[])).next())})};class W0{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.allowEmpty=t.allowEmpty,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Wt:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(t,e){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let n=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(i=>N0(this,void 0,void 0,function*(){var c,h,l;let o=null,a=null,u=null,f=i.status,x=i.statusText;if(i.ok){if(this.method!=="HEAD"){const w=yield i.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?a=w:a=JSON.parse(w))}const p=(c=this.headers.Prefer)===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),g=(h=i.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");p&&g&&g.length>1&&(u=parseInt(g[1]))}else{const p=yield i.text();try{o=JSON.parse(p)}catch{o={message:p}}if(o&&this.allowEmpty&&((l=o==null?void 0:o.details)===null||l===void 0?void 0:l.includes("Results contain 0 rows"))&&(o=null,f=200,x="OK"),o&&this.shouldThrowOnError)throw o}return{error:o,data:a,count:u,status:f,statusText:x}}));return this.shouldThrowOnError||(n=n.catch(i=>({error:{message:`FetchError: ${i.message}`,details:"",hint:"",code:i.code||""},data:null,count:null,status:0,statusText:""}))),n.then(t,e)}}class M0 extends W0{select(t){let e=!1;const r=(t??"*").split("").map(n=>/\s/.test(n)&&!e?"":(n==='"'&&(e=!e),n)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:n}={}){const i=n?`${n}.order`:"order",c=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${c?`${c},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e}={}){const r=typeof e>"u"?"limit":`${e}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:r}={}){const n=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${t}`),this.url.searchParams.set(i,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.headers.Accept="application/vnd.pgrst.object+json",this.allowEmpty=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:c="text"}={}){const h=[t?"analyze":null,e?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=this.headers.Accept;return this.headers.Accept=`application/vnd.pgrst.plan+${c}; for="${l}"; options=${h};`,c==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class Se extends M0{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}in(t,e){const r=e.map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const c=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${c}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e}={}){const r=e?`${e}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}}class G0{constructor(t,{headers:e={},schema:r,fetch:n}){this.url=t,this.headers=e,this.schema=r,this.fetch=n}select(t,{head:e=!1,count:r}={}){const n=e?"HEAD":"GET";let i=!1;const c=(t??"*").split("").map(h=>/\s/.test(h)&&!i?"":(h==='"'&&(i=!i),h)).join("");return this.url.searchParams.set("select",c),r&&(this.headers.Prefer=`count=${r}`),new Se({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:e}={}){const r="POST",n=[],i=t;if(e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),Array.isArray(t)){const c=t.reduce((h,l)=>h.concat(Object.keys(l)),[]);if(c.length>0){const h=[...new Set(c)].map(l=>`"${l}"`);this.url.searchParams.set("columns",h.join(","))}}return new Se({method:r,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:n}={}){const i="POST",c=[`resolution=${r?"ignore":"merge"}-duplicates`];e!==void 0&&this.url.searchParams.set("on_conflict",e);const h=t;return n&&c.push(`count=${n}`),this.headers.Prefer&&c.unshift(this.headers.Prefer),this.headers.Prefer=c.join(","),new Se({method:i,url:this.url,headers:this.headers,schema:this.schema,body:h,fetch:this.fetch,allowEmpty:!1})}update(t,{count:e}={}){const r="PATCH",n=[],i=t;return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Se({method:r,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const e="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Se({method:e,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const K0="1.1.0",X0={"X-Client-Info":`postgrest-js/${K0}`};class V0{constructor(t,{headers:e={},schema:r,fetch:n}={}){this.url=t,this.headers=Object.assign(Object.assign({},X0),e),this.schema=r,this.fetch=n}from(t){const e=new URL(`${this.url}/${t}`);return new G0(e,{headers:Object.assign({},this.headers),schema:this.schema,fetch:this.fetch})}rpc(t,e={},{head:r=!1,count:n}={}){let i;const c=new URL(`${this.url}/rpc/${t}`);let h;r?(i="HEAD",Object.entries(e).forEach(([o,a])=>{c.searchParams.append(o,`${a}`)})):(i="POST",h=e);const l=Object.assign({},this.headers);return n&&(l.Prefer=`count=${n}`),new Se({method:i,url:c,headers:l,schema:this.schema,body:h,fetch:this.fetch,allowEmpty:!1})}}var rt,lr;function J0(){if(lr)return rt;lr=1;var s=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return rt=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return s()}try{return __global__||s()}finally{delete Object.prototype.__global__}}(),rt}const Y0="websocket",Z0="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",Q0=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],en="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",tn=["Iñaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],rn="1.0.34",nn={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},sn="https://github.com/theturtle32/WebSocket-Node",on={node:">=4.0.0"},an={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},cn={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},hn={verbose:!1},ln={test:"tape test/unit/*.js",gulp:"gulp"},un="index",fn={lib:"./lib"},dn="lib/browser.js",xn="Apache-2.0",vn={name:Y0,description:Z0,keywords:Q0,author:en,contributors:tn,version:rn,repository:nn,homepage:sn,engines:on,dependencies:an,devDependencies:cn,config:hn,scripts:ln,main:un,directories:fn,browser:dn,license:xn};var pn=vn.version,xe;if(typeof globalThis=="object")xe=globalThis;else try{xe=J0()}catch{}finally{if(!xe&&typeof window<"u"&&(xe=window),!xe)throw new Error("Could not determine global this")}var Fe=xe.WebSocket||xe.MozWebSocket,_n=pn;function e0(s,t){var e;return t?e=new Fe(s,t):e=new Fe(s),e}Fe&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(s){Object.defineProperty(e0,s,{get:function(){return Fe[s]}})});var gn={w3cwebsocket:Fe?e0:null,version:_n};const yn="2.1.0",mn={"X-Client-Info":`realtime-js/${yn}`},bn="1.0.0",t0=1e4,wn=1e3;var He;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(He||(He={}));var re;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(re||(re={}));var ae;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(ae||(ae={}));var Ft;(function(s){s.websocket="websocket"})(Ft||(Ft={}));var ve;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(ve||(ve={}));class r0{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class kn{constructor(){this.HEADER_LENGTH=1}decode(t,e){return t.constructor===ArrayBuffer?e(this._binaryDecode(t)):e(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const e=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,e,r)}_decodeBroadcast(t,e,r){const n=e.getUint8(1),i=e.getUint8(2);let c=this.HEADER_LENGTH+2;const h=r.decode(t.slice(c,c+n));c=c+n;const l=r.decode(t.slice(c,c+i));c=c+i;const o=JSON.parse(r.decode(t.slice(c,t.byteLength)));return{ref:null,topic:h,event:l,payload:o}}}class nt{constructor(t,e,r={},n=t0){this.channel=t,this.event=e,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null,this.rateLimited=!1}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){if(this._hasReceived("timeout"))return;this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()})==="rate limited"&&(this.rateLimited=!0)}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var r;return this._hasReceived(t)&&e((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){!this.refEvent||this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var ur;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(ur||(ur={}));class Ue{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(e==null?void 0:e.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},n=>{const{onJoin:i,onLeave:c,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ue.syncState(this.state,n,i,c),this.pendingDiffs.forEach(l=>{this.state=Ue.syncDiff(this.state,l,i,c)}),this.pendingDiffs=[],h()}),this.channel._on(r.diff,{},n=>{const{onJoin:i,onLeave:c,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Ue.syncDiff(this.state,n,i,c),h())}),this.onJoin((n,i,c)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:c})}),this.onLeave((n,i,c)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,r,n){const i=this.cloneDeep(t),c=this.transformState(e),h={},l={};return this.map(i,(o,a)=>{c[o]||(l[o]=a)}),this.map(c,(o,a)=>{const u=i[o];if(u){const f=a.map(g=>g.presence_ref),x=u.map(g=>g.presence_ref),d=a.filter(g=>x.indexOf(g.presence_ref)<0),p=u.filter(g=>f.indexOf(g.presence_ref)<0);d.length>0&&(h[o]=d),p.length>0&&(l[o]=p)}else h[o]=a}),this.syncDiff(i,{joins:h,leaves:l},r,n)}static syncDiff(t,e,r,n){const{joins:i,leaves:c}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,(h,l)=>{var o;const a=(o=t[h])!==null&&o!==void 0?o:[];if(t[h]=this.cloneDeep(l),a.length>0){const u=t[h].map(x=>x.presence_ref),f=a.filter(x=>u.indexOf(x.presence_ref)<0);t[h].unshift(...f)}r(h,a,l)}),this.map(c,(h,l)=>{let o=t[h];if(!o)return;const a=l.map(u=>u.presence_ref);o=o.filter(u=>a.indexOf(u.presence_ref)<0),t[h]=o,n(h,o,l),o.length===0&&delete t[h]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(r=>e(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,r)=>{const n=t[r];return"metas"in n?e[r]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):e[r]=n,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var K;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(K||(K={}));const fr=(s,t,e={})=>{var r;const n=(r=e.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,c)=>(i[c]=En(c,s,t,n),i),{})},En=(s,t,e,r)=>{const n=t.find(h=>h.name===s),i=n==null?void 0:n.type,c=e[s];return i&&!r.includes(i)?n0(i,c):zt(c)},n0=(s,t)=>{if(s.charAt(0)==="_"){const e=s.slice(1,s.length);return Tn(t,e)}switch(s){case K.bool:return Sn(t);case K.float4:case K.float8:case K.int2:case K.int4:case K.int8:case K.numeric:case K.oid:return Bn(t);case K.json:case K.jsonb:return Cn(t);case K.timestamp:return An(t);case K.abstime:case K.date:case K.daterange:case K.int4range:case K.int8range:case K.money:case K.reltime:case K.text:case K.time:case K.timestamptz:case K.timetz:case K.tsrange:case K.tstzrange:return zt(t);default:return zt(t)}},zt=s=>s,Sn=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},Bn=s=>{if(typeof s=="string"){const t=parseFloat(s);if(!Number.isNaN(t))return t}return s},Cn=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(t){return console.log(`JSON parse error: ${t}`),s}return s},Tn=(s,t)=>{if(typeof s!="string")return s;const e=s.length-1,r=s[e];if(s[0]==="{"&&r==="}"){let i;const c=s.slice(1,e);try{i=JSON.parse("["+c+"]")}catch{i=c?c.split(","):[]}return i.map(h=>n0(t,h))}return s},An=s=>typeof s=="string"?s.replace(" ","T"):s;var dr=globalThis&&globalThis.__awaiter||function(s,t,e,r){function n(i){return i instanceof e?i:new e(function(c){c(i)})}return new(e||(e=Promise))(function(i,c){function h(a){try{o(r.next(a))}catch(u){c(u)}}function l(a){try{o(r.throw(a))}catch(u){c(u)}}function o(a){a.done?i(a.value):n(a.value).then(h,l)}o((r=r.apply(s,t||[])).next())})},xr;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(xr||(xr={}));var vr;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes"})(vr||(vr={}));var pr;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(pr||(pr={}));class Mt{constructor(t,e={config:{}},r){this.topic=t,this.params=e,this.socket=r,this.bindings={},this.state=re.closed,this.joinedOnce=!1,this.pushBuffer=[],this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},e.config),this.timeout=this.socket.timeout,this.joinPush=new nt(this,ae.join,this.params,this.timeout),this.rejoinTimer=new r0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=re.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=re.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=re.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{!this._isJoining()||(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=re.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ae.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new Ue(this)}subscribe(t,e=this.timeout){var r,n;if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:c}}=this.params;this._onError(o=>t&&t("CHANNEL_ERROR",o)),this._onClose(()=>t&&t("CLOSED"));const h={},l={broadcast:i,presence:c,postgres_changes:(n=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(o=>o.filter))!==null&&n!==void 0?n:[]};this.socket.accessToken&&(h.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:l},h)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",({postgres_changes:o})=>{var a;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),o===void 0){t&&t("SUBSCRIBED");return}else{const u=this.bindings.postgres_changes,f=(a=u==null?void 0:u.length)!==null&&a!==void 0?a:0,x=[];for(let d=0;d<f;d++){const p=u[d],{filter:{event:g,schema:w,table:v,filter:_}}=p,y=o&&o[d];if(y&&y.event===g&&y.schema===w&&y.table===v&&y.filter===_)x.push(Object.assign(Object.assign({},p),{id:y.id}));else{this.unsubscribe(),t&&t("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t("SUBSCRIBED");return}}).receive("error",o=>{t&&t("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(o).join(", ")||"error")))}).receive("timeout",()=>{t&&t("TIMED_OUT")})}return this}presenceState(){return this.presence.state}track(t,e={}){return dr(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)})}untrack(t={}){return dr(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"untrack"},t)})}on(t,e,r){return this._on(t,e,r)}send(t,e={}){return new Promise(r=>{var n,i,c;const h=this._push(t.type,t,e.timeout||this.timeout);h.rateLimited&&r("rate limited"),t.type==="broadcast"&&!(!((c=(i=(n=this.params)===null||n===void 0?void 0:n.config)===null||i===void 0?void 0:i.broadcast)===null||c===void 0)&&c.ack)&&r("ok"),h.receive("ok",()=>r("ok")),h.receive("timeout",()=>r("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=re.leaving;const e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ae.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const n=new nt(this,ae.leave,{},t);n.receive("ok",()=>{e(),r("ok")}).receive("timeout",()=>{e(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}_push(t,e,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new nt(this,t,e,r);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(t,e,r){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,r){var n,i;const c=t.toLocaleLowerCase(),{close:h,error:l,leave:o,join:a}=ae;if(r&&[h,l,o,a].indexOf(c)>=0&&r!==this._joinRef())return;let f=this._onMessage(c,e,r);if(e&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(x=>{var d,p,g;return((d=x.filter)===null||d===void 0?void 0:d.event)==="*"||((g=(p=x.filter)===null||p===void 0?void 0:p.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===c}).map(x=>x.callback(f,r)):(i=this.bindings[c])===null||i===void 0||i.filter(x=>{var d,p,g,w,v,_;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in x){const y=x.id,E=(d=x.filter)===null||d===void 0?void 0:d.event;return y&&((p=e.ids)===null||p===void 0?void 0:p.includes(y))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((g=e.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const y=(v=(w=x==null?void 0:x.filter)===null||w===void 0?void 0:w.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return y==="*"||y===((_=e==null?void 0:e.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===c}).map(x=>{if(typeof f=="object"&&"ids"in f){const d=f.data,{schema:p,table:g,commit_timestamp:w,type:v,errors:_}=d;f=Object.assign(Object.assign({},{schema:p,table:g,commit_timestamp:w,eventType:v,new:{},old:{},errors:_}),this._getPayloadRecords(d))}x.callback(f,r)})}_isClosed(){return this.state===re.closed}_isJoined(){return this.state===re.joined}_isJoining(){return this.state===re.joining}_isLeaving(){return this.state===re.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,r){const n=t.toLocaleLowerCase(),i={type:n,filter:e,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(t,e){const r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Mt.isEqual(n.filter,e))}),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ae.close,{},t)}_onError(t){this._on(ae.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=re.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const e={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(e.new=fr(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(e.old=fr(t.columns,t.old_record)),e}}var Rn=globalThis&&globalThis.__awaiter||function(s,t,e,r){function n(i){return i instanceof e?i:new e(function(c){c(i)})}return new(e||(e=Promise))(function(i,c){function h(a){try{o(r.next(a))}catch(u){c(u)}}function l(a){try{o(r.throw(a))}catch(u){c(u)}}function o(a){a.done?i(a.value):n(a.value).then(h,l)}o((r=r.apply(s,t||[])).next())})};const On=()=>{};class Pn{constructor(t,e){var r;this.accessToken=null,this.channels=[],this.endPoint="",this.headers=mn,this.params={},this.timeout=t0,this.transport=gn.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=On,this.conn=null,this.sendBuffer=[],this.serializer=new kn,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.eventsPerSecondLimitMs=100,this.inThrottle=!1,this.endPoint=`${t}/${Ft.websocket}`,e!=null&&e.params&&(this.params=e.params),e!=null&&e.headers&&(this.headers=Object.assign(Object.assign({},this.headers),e.headers)),e!=null&&e.timeout&&(this.timeout=e.timeout),e!=null&&e.logger&&(this.logger=e.logger),e!=null&&e.transport&&(this.transport=e.transport),e!=null&&e.heartbeatIntervalMs&&(this.heartbeatIntervalMs=e.heartbeatIntervalMs);const n=(r=e==null?void 0:e.params)===null||r===void 0?void 0:r.eventsPerSecond;n&&(this.eventsPerSecondLimitMs=Math.floor(1e3/n)),this.reconnectAfterMs=e!=null&&e.reconnectAfterMs?e.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=e!=null&&e.encode?e.encode:(i,c)=>c(JSON.stringify(i)),this.decode=e!=null&&e.decode?e.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new r0(()=>Rn(this,void 0,void 0,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs)}connect(){this.conn||(this.conn=new this.transport(this._endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t)))}disconnect(t,e){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,e??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(t){return t.unsubscribe().then(e=>(this.channels.length===0&&this.disconnect(),e))}removeAllChannels(){return Promise.all(this.channels.map(t=>t.unsubscribe())).then(t=>(this.disconnect(),t))}log(t,e,r){this.logger(t,e,r)}connectionState(){switch(this.conn&&this.conn.readyState){case He.connecting:return ve.Connecting;case He.open:return ve.Open;case He.closing:return ve.Closing;default:return ve.Closed}}isConnected(){return this.connectionState()===ve.Open}channel(t,e={config:{}}){this.isConnected()||this.connect();const r=new Mt(`realtime:${t}`,e,this);return this.channels.push(r),r}push(t){const{topic:e,event:r,payload:n,ref:i}=t;let c=()=>{this.encode(t,h=>{var l;(l=this.conn)===null||l===void 0||l.send(h)})};if(this.log("push",`${e} ${r} (${i})`,n),this.isConnected())if(["broadcast","presence","postgres_changes"].includes(r)){if(this._throttle(c)())return"rate limited"}else c();else this.sendBuffer.push(c)}setAuth(t){this.accessToken=t,this.channels.forEach(e=>{t&&e.updateJoinPayload({access_token:t}),e.joinedOnce&&e._isJoined()&&e._push(ae.access_token,{access_token:t})})}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e._joinRef()!==t._joinRef())}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:bn}))}_onConnMessage(t){this.decode(t.data,e=>{let{topic:r,event:n,payload:i,ref:c}=e;(c&&c===this.pendingHeartbeatRef||n===(i==null?void 0:i.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${n} ${c&&"("+c+")"||""}`,i),this.channels.filter(h=>h._isMember(r)).forEach(h=>h._trigger(n,i,c)),this.stateChangeCallbacks.message.forEach(h=>h(e))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(e=>e(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(e=>e(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(ae.error))}_appendParams(t,e){if(Object.keys(e).length===0)return t;const r=t.match(/\?/)?"&":"?",n=new URLSearchParams(e);return`${t}${r}${n}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_sendHeartbeat(){var t;if(!!this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(wn,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_throttle(t,e=this.eventsPerSecondLimitMs){return()=>this.inThrottle?!0:(t(),this.inThrottle=!0,setTimeout(()=>{this.inThrottle=!1},e),!1)}}class i0 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Q(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class jn extends i0{constructor(t,e){super(t),this.name="StorageApiError",this.status=e}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class $n extends i0{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}}var s0=globalThis&&globalThis.__awaiter||function(s,t,e,r){function n(i){return i instanceof e?i:new e(function(c){c(i)})}return new(e||(e=Promise))(function(i,c){function h(a){try{o(r.next(a))}catch(u){c(u)}}function l(a){try{o(r.throw(a))}catch(u){c(u)}}function o(a){a.done?i(a.value):n(a.value).then(h,l)}o((r=r.apply(s,t||[])).next())})};const o0=s=>{let t;return s?t=s:typeof fetch>"u"?t=(...e)=>s0(void 0,void 0,void 0,function*(){return yield(yield Ke(()=>Promise.resolve().then(()=>Xe),void 0)).fetch(...e)}):t=fetch,(...e)=>t(...e)},Dn=()=>s0(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ke(()=>Promise.resolve().then(()=>Xe),void 0)).Response:Response});var Be=globalThis&&globalThis.__awaiter||function(s,t,e,r){function n(i){return i instanceof e?i:new e(function(c){c(i)})}return new(e||(e=Promise))(function(i,c){function h(a){try{o(r.next(a))}catch(u){c(u)}}function l(a){try{o(r.throw(a))}catch(u){c(u)}}function o(a){a.done?i(a.value):n(a.value).then(h,l)}o((r=r.apply(s,t||[])).next())})};const _r=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),In=(s,t)=>Be(void 0,void 0,void 0,function*(){const e=yield Dn();s instanceof e?s.json().then(r=>{t(new jn(_r(r),s.status||500))}):t(new $n(_r(s),s))}),Hn=(s,t,e,r)=>{const n={method:s,headers:(t==null?void 0:t.headers)||{}};return s==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),e))};function Ve(s,t,e,r,n,i){return Be(this,void 0,void 0,function*(){return new Promise((c,h)=>{s(e,Hn(t,r,n,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>c(l)).catch(l=>In(l,h))})})}function qt(s,t,e,r){return Be(this,void 0,void 0,function*(){return Ve(s,"GET",t,e,r)})}function pe(s,t,e,r,n){return Be(this,void 0,void 0,function*(){return Ve(s,"POST",t,r,n,e)})}function Un(s,t,e,r,n){return Be(this,void 0,void 0,function*(){return Ve(s,"PUT",t,r,n,e)})}function a0(s,t,e,r,n){return Be(this,void 0,void 0,function*(){return Ve(s,"DELETE",t,r,n,e)})}var ce=globalThis&&globalThis.__awaiter||function(s,t,e,r){function n(i){return i instanceof e?i:new e(function(c){c(i)})}return new(e||(e=Promise))(function(i,c){function h(a){try{o(r.next(a))}catch(u){c(u)}}function l(a){try{o(r.throw(a))}catch(u){c(u)}}function o(a){a.done?i(a.value):n(a.value).then(h,l)}o((r=r.apply(s,t||[])).next())})};const Ln={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Fn={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class zn{constructor(t,e={},r,n){this.url=t,this.headers=e,this.bucketId=r,this.fetch=o0(n)}uploadOrUpdate(t,e,r,n){return ce(this,void 0,void 0,function*(){try{let i;const c=Object.assign(Object.assign({},Fn),n),h=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",c.cacheControl),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",c.cacheControl)):(i=r,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType);const l=this._removeEmptyFolders(e),o=this._getFinalPath(l),a=yield this.fetch(`${this.url}/object/${o}`,{method:t,body:i,headers:h});return a.ok?{data:{path:l},error:null}:{data:null,error:yield a.json()}}catch(i){if(Q(i))return{data:null,error:i};throw i}})}upload(t,e,r){return ce(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,r)})}update(t,e,r){return ce(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,r)})}move(t,e){return ce(this,void 0,void 0,function*(){try{return{data:yield pe(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e},{headers:this.headers}),error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}})}copy(t,e){return ce(this,void 0,void 0,function*(){try{return{data:{path:(yield pe(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e},{headers:this.headers})).Key},error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}})}createSignedUrl(t,e,r){return ce(this,void 0,void 0,function*(){try{const n=this._getFinalPath(t);let i=yield pe(this.fetch,`${this.url}/object/sign/${n}`,{expiresIn:e},{headers:this.headers});const c=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${c}`)},{data:i,error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}})}createSignedUrls(t,e,r){return ce(this,void 0,void 0,function*(){try{const n=yield pe(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${i}`):null})),error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}})}download(t){return ce(this,void 0,void 0,function*(){try{const e=this._getFinalPath(t);return{data:yield(yield qt(this.fetch,`${this.url}/object/${e}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(e){if(Q(e))return{data:null,error:e};throw e}})}getPublicUrl(t,e){const r=this._getFinalPath(t),n=e!=null&&e.download?`?download=${e.download===!0?"":e.download}`:"";return{data:{publicUrl:encodeURI(`${this.url}/object/public/${r}${n}`)}}}remove(t){return ce(this,void 0,void 0,function*(){try{return{data:yield a0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(e){if(Q(e))return{data:null,error:e};throw e}})}list(t,e,r){return ce(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Ln),e),{prefix:t||""});return{data:yield pe(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}})}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}}const qn="2.0.0",Nn={"X-Client-Info":`storage-js/${qn}`};var ke=globalThis&&globalThis.__awaiter||function(s,t,e,r){function n(i){return i instanceof e?i:new e(function(c){c(i)})}return new(e||(e=Promise))(function(i,c){function h(a){try{o(r.next(a))}catch(u){c(u)}}function l(a){try{o(r.throw(a))}catch(u){c(u)}}function o(a){a.done?i(a.value):n(a.value).then(h,l)}o((r=r.apply(s,t||[])).next())})};class Wn{constructor(t,e={},r){this.url=t,this.headers=Object.assign(Object.assign({},Nn),e),this.fetch=o0(r)}listBuckets(){return ke(this,void 0,void 0,function*(){try{return{data:yield qt(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Q(t))return{data:null,error:t};throw t}})}getBucket(t){return ke(this,void 0,void 0,function*(){try{return{data:yield qt(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(e){if(Q(e))return{data:null,error:e};throw e}})}createBucket(t,e={public:!1}){return ke(this,void 0,void 0,function*(){try{return{data:yield pe(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:e.public},{headers:this.headers}),error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}})}updateBucket(t,e){return ke(this,void 0,void 0,function*(){try{return{data:yield Un(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public},{headers:this.headers}),error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}})}emptyBucket(t){return ke(this,void 0,void 0,function*(){try{return{data:yield pe(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(Q(e))return{data:null,error:e};throw e}})}deleteBucket(t){return ke(this,void 0,void 0,function*(){try{return{data:yield a0(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(Q(e))return{data:null,error:e};throw e}})}}class Mn extends Wn{constructor(t,e={},r){super(t,e,r)}from(t){return new zn(this.url,this.headers,t,this.fetch)}}const Gn="2.1.3",Kn={"X-Client-Info":`supabase-js/${Gn}`};var Xn=globalThis&&globalThis.__awaiter||function(s,t,e,r){function n(i){return i instanceof e?i:new e(function(c){c(i)})}return new(e||(e=Promise))(function(i,c){function h(a){try{o(r.next(a))}catch(u){c(u)}}function l(a){try{o(r.throw(a))}catch(u){c(u)}}function o(a){a.done?i(a.value):n(a.value).then(h,l)}o((r=r.apply(s,t||[])).next())})};const Vn=s=>{let t;return s?t=s:typeof fetch>"u"?t=Wt:t=fetch,(...e)=>t(...e)},Jn=()=>typeof Headers>"u"?Le.exports.Headers:Headers,Yn=(s,t,e)=>{const r=Vn(e),n=Jn();return(i,c)=>Xn(void 0,void 0,void 0,function*(){var h;const l=(h=yield t())!==null&&h!==void 0?h:s;let o=new n(c==null?void 0:c.headers);return o.has("apikey")||o.set("apikey",s),o.has("Authorization")||o.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},c),{headers:o}))})};function Zn(s){return s.replace(/\/$/,"")}function Qn(s,t){const{db:e,auth:r,realtime:n,global:i}=s,{db:c,auth:h,realtime:l,global:o}=t;return{db:Object.assign(Object.assign({},c),e),auth:Object.assign(Object.assign({},h),r),realtime:Object.assign(Object.assign({},l),n),global:Object.assign(Object.assign({},o),i)}}var Je=globalThis&&globalThis.__awaiter||function(s,t,e,r){function n(i){return i instanceof e?i:new e(function(c){c(i)})}return new(e||(e=Promise))(function(i,c){function h(a){try{o(r.next(a))}catch(u){c(u)}}function l(a){try{o(r.throw(a))}catch(u){c(u)}}function o(a){a.done?i(a.value):n(a.value).then(h,l)}o((r=r.apply(s,t||[])).next())})};function ei(s){return Math.round(Date.now()/1e3)+s}function ti(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const t=Math.random()*16|0;return(s=="x"?t:t&3|8).toString(16)})}const ge=()=>typeof window<"u";function ie(s,t){var e;t||(t=((e=window==null?void 0:window.location)===null||e===void 0?void 0:e.href)||""),s=s.replace(/[\[\]]/g,"\\$&");const r=new RegExp("[?&#]"+s+"(=([^&#]*)|&|#|$)"),n=r.exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}const c0=s=>{let t;return s?t=s:typeof fetch>"u"?t=(...e)=>Je(void 0,void 0,void 0,function*(){return yield(yield Ke(()=>Promise.resolve().then(()=>Xe),void 0)).fetch(...e)}):t=fetch,(...e)=>t(...e)},ri=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",ni=(s,t,e)=>Je(void 0,void 0,void 0,function*(){yield s.setItem(t,JSON.stringify(e))}),gr=(s,t)=>Je(void 0,void 0,void 0,function*(){const e=yield s.getItem(t);if(!e)return null;try{return JSON.parse(e)}catch{return e}}),ii=(s,t)=>Je(void 0,void 0,void 0,function*(){yield s.removeItem(t)}),si=s=>{try{return decodeURIComponent(atob(s.replace(/[-]/g,"+").replace(/[_]/g,"/")).split("").map(t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)).join(""))}catch(t){if(t instanceof ReferenceError)return Buffer.from(s,"base64").toString("utf-8");throw t}};class Ye{constructor(){this.promise=new Ye.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}}Ye.promiseConstructor=Promise;function yr(s){const t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,e=s.split(".");if(e.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(e[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=e[1];return JSON.parse(si(r))}class Gt extends Error{constructor(t){super(t),this.__isAuthError=!0,this.name="AuthError"}}function M(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class oi extends Gt{constructor(t,e){super(t),this.name="AuthApiError",this.status=e}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function ai(s){return M(s)&&s.name==="AuthApiError"}class h0 extends Gt{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}}class Ze extends Gt{constructor(t,e,r){super(t),this.name=e,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ie extends Ze{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class it extends Ze{constructor(t){super(t,"AuthInvalidCredentialsError",400)}}class le extends Ze{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ge extends Ze{constructor(t,e){super(t,"AuthRetryableFetchError",e)}}var Kt=globalThis&&globalThis.__awaiter||function(s,t,e,r){function n(i){return i instanceof e?i:new e(function(c){c(i)})}return new(e||(e=Promise))(function(i,c){function h(a){try{o(r.next(a))}catch(u){c(u)}}function l(a){try{o(r.throw(a))}catch(u){c(u)}}function o(a){a.done?i(a.value):n(a.value).then(h,l)}o((r=r.apply(s,t||[])).next())})},ci=globalThis&&globalThis.__rest||function(s,t){var e={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&t.indexOf(r)<0&&(e[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(s);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(s,r[n])&&(e[r[n]]=s[r[n]]);return e};const We=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),hi=(s,t)=>Kt(void 0,void 0,void 0,function*(){const e=[502,503,504];ri(s)?e.includes(s.status)?t(new Ge(We(s),s.status)):s.json().then(r=>{t(new oi(We(r),s.status||500))}).catch(r=>{t(new h0(We(r),r))}):t(new Ge(We(s),0))}),li=(s,t,e,r)=>{const n={method:s,headers:(t==null?void 0:t.headers)||{}};return s==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),e))};function X(s,t,e,r){var n;return Kt(this,void 0,void 0,function*(){const i=Object.assign({},r==null?void 0:r.headers);r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const c=(n=r==null?void 0:r.query)!==null&&n!==void 0?n:{};r!=null&&r.redirectTo&&(c.redirect_to=r.redirectTo);const h=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",l=yield ui(s,t,e+h,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}})}function ui(s,t,e,r,n,i){return Kt(this,void 0,void 0,function*(){return new Promise((c,h)=>{s(e,li(t,r,n,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>c(l)).catch(l=>hi(l,h))})})}function Ee(s){var t;let e=null;xi(s)&&(e=Object.assign({},s),e.expires_at=ei(s.expires_in));const r=(t=s.user)!==null&&t!==void 0?t:s;return{data:{session:e,user:r},error:null}}function _e(s){var t;return{data:{user:(t=s.user)!==null&&t!==void 0?t:s},error:null}}function fi(s){return{data:s,error:null}}function di(s){const{action_link:t,email_otp:e,hashed_token:r,redirect_to:n,verification_type:i}=s,c=ci(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:t,email_otp:e,hashed_token:r,redirect_to:n,verification_type:i},l=Object.assign({},c);return{data:{properties:h,user:l},error:null}}function xi(s){return s.access_token&&s.refresh_token&&s.expires_in}var he=globalThis&&globalThis.__awaiter||function(s,t,e,r){function n(i){return i instanceof e?i:new e(function(c){c(i)})}return new(e||(e=Promise))(function(i,c){function h(a){try{o(r.next(a))}catch(u){c(u)}}function l(a){try{o(r.throw(a))}catch(u){c(u)}}function o(a){a.done?i(a.value):n(a.value).then(h,l)}o((r=r.apply(s,t||[])).next())})},vi=globalThis&&globalThis.__rest||function(s,t){var e={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&t.indexOf(r)<0&&(e[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(s);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(s,r[n])&&(e[r[n]]=s[r[n]]);return e};class pi{constructor({url:t="",headers:e={},fetch:r}){this.url=t,this.headers=e,this.fetch=c0(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(t){return he(this,void 0,void 0,function*(){try{return yield X(this.fetch,"POST",`${this.url}/logout`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(e){if(M(e))return{data:null,error:e};throw e}})}inviteUserByEmail(t,e={}){return he(this,void 0,void 0,function*(){try{return yield X(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:_e})}catch(r){if(M(r))return{data:{user:null},error:r};throw r}})}generateLink(t){return he(this,void 0,void 0,function*(){try{const{options:e}=t,r=vi(t,["options"]),n=Object.assign(Object.assign({},r),e);return"newEmail"in r&&(n.new_email=r==null?void 0:r.newEmail,delete n.newEmail),yield X(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:di,redirectTo:e==null?void 0:e.redirectTo})}catch(e){if(M(e))return{data:{properties:null,user:null},error:e};throw e}})}createUser(t){return he(this,void 0,void 0,function*(){try{return yield X(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:_e})}catch(e){if(M(e))return{data:{user:null},error:e};throw e}})}listUsers(){return he(this,void 0,void 0,function*(){try{const{data:t,error:e}=yield X(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers});if(e)throw e;return{data:Object.assign({},t),error:null}}catch(t){if(M(t))return{data:{users:[]},error:t};throw t}})}getUserById(t){return he(this,void 0,void 0,function*(){try{return yield X(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:_e})}catch(e){if(M(e))return{data:{user:null},error:e};throw e}})}updateUserById(t,e){return he(this,void 0,void 0,function*(){try{return yield X(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:e,headers:this.headers,xform:_e})}catch(r){if(M(r))return{data:{user:null},error:r};throw r}})}deleteUser(t){return he(this,void 0,void 0,function*(){try{return yield X(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:_e})}catch(e){if(M(e))return{data:{user:null},error:e};throw e}})}_listFactors(t){return he(this,void 0,void 0,function*(){try{return{data:yield X(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers}),error:null}}catch(e){if(M(e))return{data:null,error:e};throw e}})}_deleteFactor(t){return he(this,void 0,void 0,function*(){try{return{data:yield X(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(e){if(M(e))return{data:null,error:e};throw e}})}}const _i="2.4.3",gi="http://localhost:9999",yi="supabase.auth.token",mi={"X-Client-Info":`gotrue-js/${_i}`},st=10,Me={MAX_RETRIES:10,RETRY_INTERVAL:2},bi={getItem:s=>ge()?globalThis.localStorage.getItem(s):null,setItem:(s,t)=>{!ge()||globalThis.localStorage.setItem(s,t)},removeItem:s=>{!ge()||globalThis.localStorage.removeItem(s)}};function wi(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var W=globalThis&&globalThis.__awaiter||function(s,t,e,r){function n(i){return i instanceof e?i:new e(function(c){c(i)})}return new(e||(e=Promise))(function(i,c){function h(a){try{o(r.next(a))}catch(u){c(u)}}function l(a){try{o(r.throw(a))}catch(u){c(u)}}function o(a){a.done?i(a.value):n(a.value).then(h,l)}o((r=r.apply(s,t||[])).next())})};wi();const ki={url:gi,storageKey:yi,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:mi};class Ei{constructor(t){this.stateChangeEmitters=new Map,this.networkRetries=0,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0;const e=Object.assign(Object.assign({},ki),t);this.inMemorySession=null,this.storageKey=e.storageKey,this.autoRefreshToken=e.autoRefreshToken,this.persistSession=e.persistSession,this.storage=e.storage||bi,this.admin=new pi({url:e.url,headers:e.headers,fetch:e.fetch}),this.url=e.url,this.headers=e.headers,this.fetch=c0(e.fetch),this.detectSessionInUrl=e.detectSessionInUrl,this.initialize(),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)}}initialize(){return this.initializePromise||(this.initializePromise=this._initialize()),this.initializePromise}_initialize(){return W(this,void 0,void 0,function*(){if(this.initializePromise)return this.initializePromise;try{if(this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:e}=yield this._getSessionFromUrl();if(e)return yield this._removeSession(),{error:e};const{session:r,redirectType:n}=t;return yield this._saveSession(r),this._notifyAllSubscribers("SIGNED_IN",r),n==="recovery"&&this._notifyAllSubscribers("PASSWORD_RECOVERY",r),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(t){return M(t)?{error:t}:{error:new h0("Unexpected error during initialization",t)}}finally{this._handleVisibilityChange()}})}signUp(t){var e,r;return W(this,void 0,void 0,function*(){try{yield this._removeSession();let n;if("email"in t){const{email:o,password:a,options:u}=t;n=yield X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:u==null?void 0:u.emailRedirectTo,body:{email:o,password:a,data:(e=u==null?void 0:u.data)!==null&&e!==void 0?e:{},gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Ee})}else if("phone"in t){const{phone:o,password:a,options:u}=t;n=yield X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:o,password:a,data:(r=u==null?void 0:u.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Ee})}else throw new it("You must provide either an email or phone number and a password");const{data:i,error:c}=n;if(c||!i)return{data:{user:null,session:null},error:c};const h=i.session,l=i.user;return i.session&&(yield this._saveSession(i.session),this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:l,session:h},error:null}}catch(n){if(M(n))return{data:{user:null,session:null},error:n};throw n}})}signInWithPassword(t){var e,r;return W(this,void 0,void 0,function*(){try{yield this._removeSession();let n;if("email"in t){const{email:h,password:l,options:o}=t;n=yield X(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:h,password:l,data:(e=o==null?void 0:o.data)!==null&&e!==void 0?e:{},gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Ee})}else if("phone"in t){const{phone:h,password:l,options:o}=t;n=yield X(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:h,password:l,data:(r=o==null?void 0:o.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Ee})}else throw new it("You must provide either an email or phone number and a password");const{data:i,error:c}=n;return c||!i?{data:{user:null,session:null},error:c}:(i.session&&(yield this._saveSession(i.session),this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:i,error:c})}catch(n){if(M(n))return{data:{user:null,session:null},error:n};throw n}})}signInWithOAuth(t){var e,r,n;return W(this,void 0,void 0,function*(){return yield this._removeSession(),this._handleProviderSignIn(t.provider,{redirectTo:(e=t.options)===null||e===void 0?void 0:e.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(n=t.options)===null||n===void 0?void 0:n.queryParams})})}signInWithOtp(t){var e,r,n,i;return W(this,void 0,void 0,function*(){try{if(yield this._removeSession(),"email"in t){const{email:c,options:h}=t,{error:l}=yield X(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(e=h==null?void 0:h.data)!==null&&e!==void 0?e:{},create_user:(r=h==null?void 0:h.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},redirectTo:h==null?void 0:h.emailRedirectTo});return{data:{user:null,session:null},error:l}}if("phone"in t){const{phone:c,options:h}=t,{error:l}=yield X(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},create_user:(i=h==null?void 0:h.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}}});return{data:{user:null,session:null},error:l}}throw new it("You must provide either an email or phone number.")}catch(c){if(M(c))return{data:{user:null,session:null},error:c};throw c}})}verifyOtp(t){var e,r;return W(this,void 0,void 0,function*(){try{yield this._removeSession();const{data:n,error:i}=yield X(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:(e=t.options)===null||e===void 0?void 0:e.captchaToken}}),redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,xform:Ee});if(i)throw i;if(!n)throw"An error occurred on token verification.";const c=n.session,h=n.user;return c!=null&&c.access_token&&(yield this._saveSession(c),this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(n){if(M(n))return{data:{user:null,session:null},error:n};throw n}})}signInWithSSO(t){var e,r,n;return W(this,void 0,void 0,function*(){try{return yield this._removeSession(),yield X(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(e=t.options)===null||e===void 0?void 0:e.redirectTo)!==null&&r!==void 0?r:void 0}),!((n=t==null?void 0:t.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:fi})}catch(i){if(M(i))return{data:null,error:i};throw i}})}getSession(){return W(this,void 0,void 0,function*(){yield this.initializePromise;let t=null;if(this.persistSession){const i=yield gr(this.storage,this.storageKey);i!==null&&(this._isValidSession(i)?t=i:yield this._removeSession())}else t=this.inMemorySession;if(!t)return{data:{session:null},error:null};if(!(t.expires_at?t.expires_at<=Date.now()/1e3:!1))return{data:{session:t},error:null};const{session:r,error:n}=yield this._callRefreshToken(t.refresh_token);return n?{data:{session:null},error:n}:{data:{session:r},error:null}})}getUser(t){var e,r;return W(this,void 0,void 0,function*(){try{if(!t){const{data:n,error:i}=yield this.getSession();if(i)throw i;t=(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:void 0}return yield X(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:_e})}catch(n){if(M(n))return{data:{user:null},error:n};throw n}})}updateUser(t){return W(this,void 0,void 0,function*(){try{const{data:e,error:r}=yield this.getSession();if(r)throw r;if(!e.session)throw new Ie;const n=e.session,{data:i,error:c}=yield X(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,body:t,jwt:n.access_token,xform:_e});if(c)throw c;return n.user=i.user,yield this._saveSession(n),this._notifyAllSubscribers("USER_UPDATED",n),{data:{user:n.user},error:null}}catch(e){if(M(e))return{data:{user:null},error:e};throw e}})}_decodeJWT(t){return yr(t)}setSession(t){return W(this,void 0,void 0,function*(){try{if(!t.access_token||!t.refresh_token)throw new Ie;const e=Date.now()/1e3;let r=e,n=!0,i=null;const c=yr(t.access_token);if(c.exp&&(r=c.exp,n=r<=e),n){const{session:h,error:l}=yield this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!h)return{data:{user:null,session:null},error:null};i=h}else{const{data:h,error:l}=yield this.getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:h.user,token_type:"bearer",expires_in:r-e,expires_at:r},yield this._saveSession(i)}return{data:{user:i.user,session:i},error:null}}catch(e){if(M(e))return{data:{session:null,user:null},error:e};throw e}})}refreshSession(t){var e;return W(this,void 0,void 0,function*(){try{if(!t){const{data:i,error:c}=yield this.getSession();if(c)throw c;t=(e=i.session)!==null&&e!==void 0?e:void 0}if(!(t!=null&&t.refresh_token))throw new Ie;const{session:r,error:n}=yield this._callRefreshToken(t.refresh_token);return n?{data:{user:null,session:null},error:n}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}}catch(r){if(M(r))return{data:{user:null,session:null},error:r};throw r}})}_getSessionFromUrl(){return W(this,void 0,void 0,function*(){try{if(!ge())throw new le("No browser detected.");if(!this._isImplicitGrantFlow())throw new le("Not a valid implicit grant flow url.");const t=ie("error_description");if(t){const p=ie("error_code");if(!p)throw new le("No error_code detected.");const g=ie("error");throw g?new le(t,{error:g,code:p}):new le("No error detected.")}const e=ie("provider_token"),r=ie("provider_refresh_token"),n=ie("access_token");if(!n)throw new le("No access_token detected.");const i=ie("expires_in");if(!i)throw new le("No expires_in detected.");const c=ie("refresh_token");if(!c)throw new le("No refresh_token detected.");const h=ie("token_type");if(!h)throw new le("No token_type detected.");const o=Math.round(Date.now()/1e3)+parseInt(i),{data:a,error:u}=yield this.getUser(n);if(u)throw u;const f=a.user,x={provider_token:e,provider_refresh_token:r,access_token:n,expires_in:parseInt(i),expires_at:o,refresh_token:c,token_type:h,user:f},d=ie("type");return window.location.hash="",{data:{session:x,redirectType:d},error:null}}catch(t){if(M(t))return{data:{session:null,redirectType:null},error:t};throw t}})}_isImplicitGrantFlow(){return ge()&&(Boolean(ie("access_token"))||Boolean(ie("error_description")))}signOut(){var t;return W(this,void 0,void 0,function*(){const{data:e,error:r}=yield this.getSession();if(r)return{error:r};const n=(t=e.session)===null||t===void 0?void 0:t.access_token;if(n){const{error:i}=yield this.admin.signOut(n);if(i&&!(ai(i)&&(i.status===404||i.status===401)))return{error:i}}return yield this._removeSession(),this._notifyAllSubscribers("SIGNED_OUT",null),{error:null}})}onAuthStateChange(t){const e=ti(),r={id:e,callback:t,unsubscribe:()=>{this.stateChangeEmitters.delete(e)}};return this.stateChangeEmitters.set(e,r),{data:{subscription:r}}}resetPasswordForEmail(t,e={}){return W(this,void 0,void 0,function*(){try{return yield X(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,gotrue_meta_security:{captcha_token:e.captchaToken}},headers:this.headers,redirectTo:e.redirectTo})}catch(r){if(M(r))return{data:null,error:r};throw r}})}_refreshAccessToken(t){return W(this,void 0,void 0,function*(){try{return yield X(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ee})}catch(e){if(M(e))return{data:{session:null,user:null},error:e};throw e}})}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}_handleProviderSignIn(t,e={}){const r=this._getUrlForProvider(t,{redirectTo:e.redirectTo,scopes:e.scopes,queryParams:e.queryParams});return ge()&&(window.location.href=r),{data:{provider:t,url:r},error:null}}_recoverAndRefresh(){var t;return W(this,void 0,void 0,function*(){try{const e=yield gr(this.storage,this.storageKey);if(!this._isValidSession(e)){e!==null&&(yield this._removeSession());return}const r=Math.round(Date.now()/1e3);if(((t=e.expires_at)!==null&&t!==void 0?t:1/0)<r+st)if(this.autoRefreshToken&&e.refresh_token){this.networkRetries++;const{error:n}=yield this._callRefreshToken(e.refresh_token);if(n){if(console.log(n.message),n instanceof Ge&&this.networkRetries<Me.MAX_RETRIES){this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),this.refreshTokenTimer=setTimeout(()=>this._recoverAndRefresh(),Math.pow(Me.RETRY_INTERVAL,this.networkRetries)*100);return}yield this._removeSession()}this.networkRetries=0}else yield this._removeSession();else this.persistSession&&(yield this._saveSession(e)),this._notifyAllSubscribers("SIGNED_IN",e)}catch(e){console.error(e);return}})}_callRefreshToken(t){var e,r;return W(this,void 0,void 0,function*(){if(this.refreshingDeferred)return this.refreshingDeferred.promise;try{if(this.refreshingDeferred=new Ye,!t)throw new Ie;const{data:n,error:i}=yield this._refreshAccessToken(t);if(i)throw i;if(!n.session)throw new Ie;yield this._saveSession(n.session),this._notifyAllSubscribers("TOKEN_REFRESHED",n.session);const c={session:n.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(n){if(M(n)){const i={session:null,error:n};return(e=this.refreshingDeferred)===null||e===void 0||e.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(n),n}finally{this.refreshingDeferred=null}})}_notifyAllSubscribers(t,e){this.stateChangeEmitters.forEach(r=>r.callback(t,e))}_saveSession(t){return W(this,void 0,void 0,function*(){this.persistSession||(this.inMemorySession=t);const e=t.expires_at;if(e){const r=Math.round(Date.now()/1e3),n=e-r,i=n>st?st:.5;this._startAutoRefreshToken((n-i)*1e3)}this.persistSession&&t.expires_at&&(yield this._persistSession(t))})}_persistSession(t){return ni(this.storage,this.storageKey,t)}_removeSession(){return W(this,void 0,void 0,function*(){this.persistSession?yield ii(this.storage,this.storageKey):this.inMemorySession=null,this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer)})}_startAutoRefreshToken(t){this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),!(t<=0||!this.autoRefreshToken)&&(this.refreshTokenTimer=setTimeout(()=>W(this,void 0,void 0,function*(){this.networkRetries++;const{data:{session:e},error:r}=yield this.getSession();if(!r&&e){const{error:n}=yield this._callRefreshToken(e.refresh_token);n||(this.networkRetries=0),n instanceof Ge&&this.networkRetries<Me.MAX_RETRIES&&this._startAutoRefreshToken(Math.pow(Me.RETRY_INTERVAL,this.networkRetries)*100)}}),t),typeof this.refreshTokenTimer.unref=="function"&&this.refreshTokenTimer.unref())}_handleVisibilityChange(){if(!ge()||!(window!=null&&window.addEventListener))return!1;try{window==null||window.addEventListener("visibilitychange",()=>W(this,void 0,void 0,function*(){document.visibilityState==="visible"&&(yield this.initializePromise,yield this._recoverAndRefresh())}))}catch(t){console.error("_handleVisibilityChange",t)}}_getUrlForProvider(t,e){const r=[`provider=${encodeURIComponent(t)}`];if(e!=null&&e.redirectTo&&r.push(`redirect_to=${encodeURIComponent(e.redirectTo)}`),e!=null&&e.scopes&&r.push(`scopes=${encodeURIComponent(e.scopes)}`),e!=null&&e.queryParams){const n=new URLSearchParams(e.queryParams);r.push(n.toString())}return`${this.url}/authorize?${r.join("&")}`}_unenroll(t){var e;return W(this,void 0,void 0,function*(){try{const{data:r,error:n}=yield this.getSession();return n?{data:null,error:n}:yield X(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(e=r==null?void 0:r.session)===null||e===void 0?void 0:e.access_token})}catch(r){if(M(r))return{data:null,error:r};throw r}})}_enroll(t){var e,r;return W(this,void 0,void 0,function*(){try{const{data:n,error:i}=yield this.getSession();if(i)return{data:null,error:i};const{data:c,error:h}=yield X(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:t.friendlyName,factor_type:t.factorType,issuer:t.issuer},headers:this.headers,jwt:(e=n==null?void 0:n.session)===null||e===void 0?void 0:e.access_token});return h?{data:null,error:h}:(!((r=c==null?void 0:c.totp)===null||r===void 0)&&r.qr_code&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})}catch(n){if(M(n))return{data:null,error:n};throw n}})}_verify(t){var e;return W(this,void 0,void 0,function*(){try{const{data:r,error:n}=yield this.getSession();if(n)return{data:null,error:n};const{data:i,error:c}=yield X(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(e=r==null?void 0:r.session)===null||e===void 0?void 0:e.access_token});return c?{data:null,error:c}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:c})}catch(r){if(M(r))return{data:null,error:r};throw r}})}_challenge(t){var e;return W(this,void 0,void 0,function*(){try{const{data:r,error:n}=yield this.getSession();return n?{data:null,error:n}:yield X(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{headers:this.headers,jwt:(e=r==null?void 0:r.session)===null||e===void 0?void 0:e.access_token})}catch(r){if(M(r))return{data:null,error:r};throw r}})}_challengeAndVerify(t){return W(this,void 0,void 0,function*(){const{data:e,error:r}=yield this._challenge({factorId:t.factorId});return r?{data:null,error:r}:yield this._verify({factorId:t.factorId,challengeId:e.id,code:t.code})})}_listFactors(){return W(this,void 0,void 0,function*(){const{data:{user:t},error:e}=yield this.getUser();if(e)return{data:null,error:e};const r=(t==null?void 0:t.factors)||[],n=r.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:r,totp:n},error:null}})}_getAuthenticatorAssuranceLevel(){var t,e;return W(this,void 0,void 0,function*(){const{data:{session:r},error:n}=yield this.getSession();if(n)return{data:null,error:n};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const i=this._decodeJWT(r.access_token);let c=null;i.aal&&(c=i.aal);let h=c;((e=(t=r.user.factors)===null||t===void 0?void 0:t.filter(a=>a.status==="verified"))!==null&&e!==void 0?e:[]).length>0&&(h="aal2");const o=i.amr||[];return{data:{currentLevel:c,nextLevel:h,currentAuthenticationMethods:o},error:null}})}}class Si extends Ei{constructor(t){super(t)}}var Bi=globalThis&&globalThis.__awaiter||function(s,t,e,r){function n(i){return i instanceof e?i:new e(function(c){c(i)})}return new(e||(e=Promise))(function(i,c){function h(a){try{o(r.next(a))}catch(u){c(u)}}function l(a){try{o(r.throw(a))}catch(u){c(u)}}function o(a){a.done?i(a.value):n(a.value).then(h,l)}o((r=r.apply(s,t||[])).next())})};const Ci={headers:Kn},Ti={schema:"public"},Ai={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},Ri={};class Oi{constructor(t,e,r){var n,i,c,h,l,o,a,u;if(this.supabaseUrl=t,this.supabaseKey=e,!t)throw new Error("supabaseUrl is required.");if(!e)throw new Error("supabaseKey is required.");const f=Zn(t);if(this.realtimeUrl=`${f}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${f}/auth/v1`,this.storageUrl=`${f}/storage/v1`,f.match(/(supabase\.co)|(supabase\.in)/)){const w=f.split(".");this.functionsUrl=`${w[0]}.functions.${w[1]}.${w[2]}`}else this.functionsUrl=`${f}/functions/v1`;const d=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,p={db:Ti,realtime:Ri,auth:Object.assign(Object.assign({},Ai),{storageKey:d}),global:Ci},g=Qn(r??{},p);this.storageKey=(i=(n=g.auth)===null||n===void 0?void 0:n.storageKey)!==null&&i!==void 0?i:"",this.headers=(h=(c=g.global)===null||c===void 0?void 0:c.headers)!==null&&h!==void 0?h:{},this.auth=this._initSupabaseAuthClient((l=g.auth)!==null&&l!==void 0?l:{},this.headers,(o=g.global)===null||o===void 0?void 0:o.fetch),this.fetch=Yn(e,this._getAccessToken.bind(this),(a=g.global)===null||a===void 0?void 0:a.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},g.realtime)),this.rest=new V0(`${f}/rest/v1`,{headers:this.headers,schema:(u=g.db)===null||u===void 0?void 0:u.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new F0(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Mn(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}rpc(t,e={},r){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,e;return Bi(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(e=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,storageKey:i},c,h){const l={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Si({url:this.authUrl,headers:Object.assign(Object.assign({},l),c),storageKey:i,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,fetch:h})}_initRealtimeClient(t){return new Pn(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,r)=>{this._handleTokenChanged(e,r==null?void 0:r.access_token,"CLIENT")})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==e?(this.realtime.setAuth(e??null),this.changedAccessToken=e):(t==="SIGNED_OUT"||t==="USER_DELETED")&&(this.realtime.setAuth(this.supabaseKey),r=="STORAGE"&&this.auth.signOut())}}const Pi=(s,t,e)=>new Oi(s,t,e);function Xt(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){var t=Math.random()*16|0,e=s=="x"?t:t&3|8;return e.toString(16)})}var l0={exports:{}};function ji(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ot={exports:{}};const $i={},Di=Object.freeze(Object.defineProperty({__proto__:null,default:$i},Symbol.toStringTag,{value:"Module"})),Ii=q0(Di);var mr;function q(){return mr||(mr=1,function(s,t){(function(e,r){s.exports=r()})(F,function(){var e=e||function(r,n){var i;if(typeof window<"u"&&window.crypto&&(i=window.crypto),typeof self<"u"&&self.crypto&&(i=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(i=globalThis.crypto),!i&&typeof window<"u"&&window.msCrypto&&(i=window.msCrypto),!i&&typeof F<"u"&&F.crypto&&(i=F.crypto),!i&&typeof ji=="function")try{i=Ii}catch{}var c=function(){if(i){if(typeof i.getRandomValues=="function")try{return i.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof i.randomBytes=="function")try{return i.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},h=Object.create||function(){function v(){}return function(_){var y;return v.prototype=_,y=new v,v.prototype=null,y}}(),l={},o=l.lib={},a=o.Base=function(){return{extend:function(v){var _=h(this);return v&&_.mixIn(v),(!_.hasOwnProperty("init")||this.init===_.init)&&(_.init=function(){_.$super.init.apply(this,arguments)}),_.init.prototype=_,_.$super=this,_},create:function(){var v=this.extend();return v.init.apply(v,arguments),v},init:function(){},mixIn:function(v){for(var _ in v)v.hasOwnProperty(_)&&(this[_]=v[_]);v.hasOwnProperty("toString")&&(this.toString=v.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),u=o.WordArray=a.extend({init:function(v,_){v=this.words=v||[],_!=n?this.sigBytes=_:this.sigBytes=v.length*4},toString:function(v){return(v||x).stringify(this)},concat:function(v){var _=this.words,y=v.words,E=this.sigBytes,S=v.sigBytes;if(this.clamp(),E%4)for(var C=0;C<S;C++){var T=y[C>>>2]>>>24-C%4*8&255;_[E+C>>>2]|=T<<24-(E+C)%4*8}else for(var D=0;D<S;D+=4)_[E+D>>>2]=y[D>>>2];return this.sigBytes+=S,this},clamp:function(){var v=this.words,_=this.sigBytes;v[_>>>2]&=4294967295<<32-_%4*8,v.length=r.ceil(_/4)},clone:function(){var v=a.clone.call(this);return v.words=this.words.slice(0),v},random:function(v){for(var _=[],y=0;y<v;y+=4)_.push(c());return new u.init(_,v)}}),f=l.enc={},x=f.Hex={stringify:function(v){for(var _=v.words,y=v.sigBytes,E=[],S=0;S<y;S++){var C=_[S>>>2]>>>24-S%4*8&255;E.push((C>>>4).toString(16)),E.push((C&15).toString(16))}return E.join("")},parse:function(v){for(var _=v.length,y=[],E=0;E<_;E+=2)y[E>>>3]|=parseInt(v.substr(E,2),16)<<24-E%8*4;return new u.init(y,_/2)}},d=f.Latin1={stringify:function(v){for(var _=v.words,y=v.sigBytes,E=[],S=0;S<y;S++){var C=_[S>>>2]>>>24-S%4*8&255;E.push(String.fromCharCode(C))}return E.join("")},parse:function(v){for(var _=v.length,y=[],E=0;E<_;E++)y[E>>>2]|=(v.charCodeAt(E)&255)<<24-E%4*8;return new u.init(y,_)}},p=f.Utf8={stringify:function(v){try{return decodeURIComponent(escape(d.stringify(v)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(v){return d.parse(unescape(encodeURIComponent(v)))}},g=o.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(v){typeof v=="string"&&(v=p.parse(v)),this._data.concat(v),this._nDataBytes+=v.sigBytes},_process:function(v){var _,y=this._data,E=y.words,S=y.sigBytes,C=this.blockSize,T=C*4,D=S/T;v?D=r.ceil(D):D=r.max((D|0)-this._minBufferSize,0);var b=D*C,k=r.min(b*4,S);if(b){for(var R=0;R<b;R+=C)this._doProcessBlock(E,R);_=E.splice(0,b),y.sigBytes-=k}return new u.init(_,k)},clone:function(){var v=a.clone.call(this);return v._data=this._data.clone(),v},_minBufferSize:0});o.Hasher=g.extend({cfg:a.extend(),init:function(v){this.cfg=this.cfg.extend(v),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(v){return this._append(v),this._process(),this},finalize:function(v){v&&this._append(v);var _=this._doFinalize();return _},blockSize:16,_createHelper:function(v){return function(_,y){return new v.init(y).finalize(_)}},_createHmacHelper:function(v){return function(_,y){return new w.HMAC.init(v,y).finalize(_)}}});var w=l.algo={};return l}(Math);return e})}(ot)),ot.exports}var at={exports:{}},br;function Qe(){return br||(br=1,function(s,t){(function(e,r){s.exports=r(q())})(F,function(e){return function(r){var n=e,i=n.lib,c=i.Base,h=i.WordArray,l=n.x64={};l.Word=c.extend({init:function(o,a){this.high=o,this.low=a}}),l.WordArray=c.extend({init:function(o,a){o=this.words=o||[],a!=r?this.sigBytes=a:this.sigBytes=o.length*8},toX32:function(){for(var o=this.words,a=o.length,u=[],f=0;f<a;f++){var x=o[f];u.push(x.high),u.push(x.low)}return h.create(u,this.sigBytes)},clone:function(){for(var o=c.clone.call(this),a=o.words=this.words.slice(0),u=a.length,f=0;f<u;f++)a[f]=a[f].clone();return o}})}(),e})}(at)),at.exports}var ct={exports:{}},wr;function Hi(){return wr||(wr=1,function(s,t){(function(e,r){s.exports=r(q())})(F,function(e){return function(){if(typeof ArrayBuffer=="function"){var r=e,n=r.lib,i=n.WordArray,c=i.init,h=i.init=function(l){if(l instanceof ArrayBuffer&&(l=new Uint8Array(l)),(l instanceof Int8Array||typeof Uint8ClampedArray<"u"&&l instanceof Uint8ClampedArray||l instanceof Int16Array||l instanceof Uint16Array||l instanceof Int32Array||l instanceof Uint32Array||l instanceof Float32Array||l instanceof Float64Array)&&(l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength)),l instanceof Uint8Array){for(var o=l.byteLength,a=[],u=0;u<o;u++)a[u>>>2]|=l[u]<<24-u%4*8;c.call(this,a,o)}else c.apply(this,arguments)};h.prototype=i}}(),e.lib.WordArray})}(ct)),ct.exports}var ht={exports:{}},kr;function Ui(){return kr||(kr=1,function(s,t){(function(e,r){s.exports=r(q())})(F,function(e){return function(){var r=e,n=r.lib,i=n.WordArray,c=r.enc;c.Utf16=c.Utf16BE={stringify:function(l){for(var o=l.words,a=l.sigBytes,u=[],f=0;f<a;f+=2){var x=o[f>>>2]>>>16-f%4*8&65535;u.push(String.fromCharCode(x))}return u.join("")},parse:function(l){for(var o=l.length,a=[],u=0;u<o;u++)a[u>>>1]|=l.charCodeAt(u)<<16-u%2*16;return i.create(a,o*2)}},c.Utf16LE={stringify:function(l){for(var o=l.words,a=l.sigBytes,u=[],f=0;f<a;f+=2){var x=h(o[f>>>2]>>>16-f%4*8&65535);u.push(String.fromCharCode(x))}return u.join("")},parse:function(l){for(var o=l.length,a=[],u=0;u<o;u++)a[u>>>1]|=h(l.charCodeAt(u)<<16-u%2*16);return i.create(a,o*2)}};function h(l){return l<<8&4278255360|l>>>8&16711935}}(),e.enc.Utf16})}(ht)),ht.exports}var lt={exports:{}},Er;function Ce(){return Er||(Er=1,function(s,t){(function(e,r){s.exports=r(q())})(F,function(e){return function(){var r=e,n=r.lib,i=n.WordArray,c=r.enc;c.Base64={stringify:function(l){var o=l.words,a=l.sigBytes,u=this._map;l.clamp();for(var f=[],x=0;x<a;x+=3)for(var d=o[x>>>2]>>>24-x%4*8&255,p=o[x+1>>>2]>>>24-(x+1)%4*8&255,g=o[x+2>>>2]>>>24-(x+2)%4*8&255,w=d<<16|p<<8|g,v=0;v<4&&x+v*.75<a;v++)f.push(u.charAt(w>>>6*(3-v)&63));var _=u.charAt(64);if(_)for(;f.length%4;)f.push(_);return f.join("")},parse:function(l){var o=l.length,a=this._map,u=this._reverseMap;if(!u){u=this._reverseMap=[];for(var f=0;f<a.length;f++)u[a.charCodeAt(f)]=f}var x=a.charAt(64);if(x){var d=l.indexOf(x);d!==-1&&(o=d)}return h(l,o,u)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function h(l,o,a){for(var u=[],f=0,x=0;x<o;x++)if(x%4){var d=a[l.charCodeAt(x-1)]<<x%4*2,p=a[l.charCodeAt(x)]>>>6-x%4*2,g=d|p;u[f>>>2]|=g<<24-f%4*8,f++}return i.create(u,f)}}(),e.enc.Base64})}(lt)),lt.exports}var ut={exports:{}},Sr;function Li(){return Sr||(Sr=1,function(s,t){(function(e,r){s.exports=r(q())})(F,function(e){return function(){var r=e,n=r.lib,i=n.WordArray,c=r.enc;c.Base64url={stringify:function(l,o=!0){var a=l.words,u=l.sigBytes,f=o?this._safe_map:this._map;l.clamp();for(var x=[],d=0;d<u;d+=3)for(var p=a[d>>>2]>>>24-d%4*8&255,g=a[d+1>>>2]>>>24-(d+1)%4*8&255,w=a[d+2>>>2]>>>24-(d+2)%4*8&255,v=p<<16|g<<8|w,_=0;_<4&&d+_*.75<u;_++)x.push(f.charAt(v>>>6*(3-_)&63));var y=f.charAt(64);if(y)for(;x.length%4;)x.push(y);return x.join("")},parse:function(l,o=!0){var a=l.length,u=o?this._safe_map:this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var x=0;x<u.length;x++)f[u.charCodeAt(x)]=x}var d=u.charAt(64);if(d){var p=l.indexOf(d);p!==-1&&(a=p)}return h(l,a,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function h(l,o,a){for(var u=[],f=0,x=0;x<o;x++)if(x%4){var d=a[l.charCodeAt(x-1)]<<x%4*2,p=a[l.charCodeAt(x)]>>>6-x%4*2,g=d|p;u[f>>>2]|=g<<24-f%4*8,f++}return i.create(u,f)}}(),e.enc.Base64url})}(ut)),ut.exports}var ft={exports:{}},Br;function Te(){return Br||(Br=1,function(s,t){(function(e,r){s.exports=r(q())})(F,function(e){return function(r){var n=e,i=n.lib,c=i.WordArray,h=i.Hasher,l=n.algo,o=[];(function(){for(var p=0;p<64;p++)o[p]=r.abs(r.sin(p+1))*4294967296|0})();var a=l.MD5=h.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(p,g){for(var w=0;w<16;w++){var v=g+w,_=p[v];p[v]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360}var y=this._hash.words,E=p[g+0],S=p[g+1],C=p[g+2],T=p[g+3],D=p[g+4],b=p[g+5],k=p[g+6],R=p[g+7],O=p[g+8],m=p[g+9],B=p[g+10],I=p[g+11],L=p[g+12],U=p[g+13],H=p[g+14],N=p[g+15],A=y[0],P=y[1],$=y[2],j=y[3];A=u(A,P,$,j,E,7,o[0]),j=u(j,A,P,$,S,12,o[1]),$=u($,j,A,P,C,17,o[2]),P=u(P,$,j,A,T,22,o[3]),A=u(A,P,$,j,D,7,o[4]),j=u(j,A,P,$,b,12,o[5]),$=u($,j,A,P,k,17,o[6]),P=u(P,$,j,A,R,22,o[7]),A=u(A,P,$,j,O,7,o[8]),j=u(j,A,P,$,m,12,o[9]),$=u($,j,A,P,B,17,o[10]),P=u(P,$,j,A,I,22,o[11]),A=u(A,P,$,j,L,7,o[12]),j=u(j,A,P,$,U,12,o[13]),$=u($,j,A,P,H,17,o[14]),P=u(P,$,j,A,N,22,o[15]),A=f(A,P,$,j,S,5,o[16]),j=f(j,A,P,$,k,9,o[17]),$=f($,j,A,P,I,14,o[18]),P=f(P,$,j,A,E,20,o[19]),A=f(A,P,$,j,b,5,o[20]),j=f(j,A,P,$,B,9,o[21]),$=f($,j,A,P,N,14,o[22]),P=f(P,$,j,A,D,20,o[23]),A=f(A,P,$,j,m,5,o[24]),j=f(j,A,P,$,H,9,o[25]),$=f($,j,A,P,T,14,o[26]),P=f(P,$,j,A,O,20,o[27]),A=f(A,P,$,j,U,5,o[28]),j=f(j,A,P,$,C,9,o[29]),$=f($,j,A,P,R,14,o[30]),P=f(P,$,j,A,L,20,o[31]),A=x(A,P,$,j,b,4,o[32]),j=x(j,A,P,$,O,11,o[33]),$=x($,j,A,P,I,16,o[34]),P=x(P,$,j,A,H,23,o[35]),A=x(A,P,$,j,S,4,o[36]),j=x(j,A,P,$,D,11,o[37]),$=x($,j,A,P,R,16,o[38]),P=x(P,$,j,A,B,23,o[39]),A=x(A,P,$,j,U,4,o[40]),j=x(j,A,P,$,E,11,o[41]),$=x($,j,A,P,T,16,o[42]),P=x(P,$,j,A,k,23,o[43]),A=x(A,P,$,j,m,4,o[44]),j=x(j,A,P,$,L,11,o[45]),$=x($,j,A,P,N,16,o[46]),P=x(P,$,j,A,C,23,o[47]),A=d(A,P,$,j,E,6,o[48]),j=d(j,A,P,$,R,10,o[49]),$=d($,j,A,P,H,15,o[50]),P=d(P,$,j,A,b,21,o[51]),A=d(A,P,$,j,L,6,o[52]),j=d(j,A,P,$,T,10,o[53]),$=d($,j,A,P,B,15,o[54]),P=d(P,$,j,A,S,21,o[55]),A=d(A,P,$,j,O,6,o[56]),j=d(j,A,P,$,N,10,o[57]),$=d($,j,A,P,k,15,o[58]),P=d(P,$,j,A,U,21,o[59]),A=d(A,P,$,j,D,6,o[60]),j=d(j,A,P,$,I,10,o[61]),$=d($,j,A,P,C,15,o[62]),P=d(P,$,j,A,m,21,o[63]),y[0]=y[0]+A|0,y[1]=y[1]+P|0,y[2]=y[2]+$|0,y[3]=y[3]+j|0},_doFinalize:function(){var p=this._data,g=p.words,w=this._nDataBytes*8,v=p.sigBytes*8;g[v>>>5]|=128<<24-v%32;var _=r.floor(w/4294967296),y=w;g[(v+64>>>9<<4)+15]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,g[(v+64>>>9<<4)+14]=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,p.sigBytes=(g.length+1)*4,this._process();for(var E=this._hash,S=E.words,C=0;C<4;C++){var T=S[C];S[C]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360}return E},clone:function(){var p=h.clone.call(this);return p._hash=this._hash.clone(),p}});function u(p,g,w,v,_,y,E){var S=p+(g&w|~g&v)+_+E;return(S<<y|S>>>32-y)+g}function f(p,g,w,v,_,y,E){var S=p+(g&v|w&~v)+_+E;return(S<<y|S>>>32-y)+g}function x(p,g,w,v,_,y,E){var S=p+(g^w^v)+_+E;return(S<<y|S>>>32-y)+g}function d(p,g,w,v,_,y,E){var S=p+(w^(g|~v))+_+E;return(S<<y|S>>>32-y)+g}n.MD5=h._createHelper(a),n.HmacMD5=h._createHmacHelper(a)}(Math),e.MD5})}(ft)),ft.exports}var dt={exports:{}},Cr;function Vt(){return Cr||(Cr=1,function(s,t){(function(e,r){s.exports=r(q())})(F,function(e){return function(){var r=e,n=r.lib,i=n.WordArray,c=n.Hasher,h=r.algo,l=[],o=h.SHA1=c.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(a,u){for(var f=this._hash.words,x=f[0],d=f[1],p=f[2],g=f[3],w=f[4],v=0;v<80;v++){if(v<16)l[v]=a[u+v]|0;else{var _=l[v-3]^l[v-8]^l[v-14]^l[v-16];l[v]=_<<1|_>>>31}var y=(x<<5|x>>>27)+w+l[v];v<20?y+=(d&p|~d&g)+1518500249:v<40?y+=(d^p^g)+1859775393:v<60?y+=(d&p|d&g|p&g)-1894007588:y+=(d^p^g)-899497514,w=g,g=p,p=d<<30|d>>>2,d=x,x=y}f[0]=f[0]+x|0,f[1]=f[1]+d|0,f[2]=f[2]+p|0,f[3]=f[3]+g|0,f[4]=f[4]+w|0},_doFinalize:function(){var a=this._data,u=a.words,f=this._nDataBytes*8,x=a.sigBytes*8;return u[x>>>5]|=128<<24-x%32,u[(x+64>>>9<<4)+14]=Math.floor(f/4294967296),u[(x+64>>>9<<4)+15]=f,a.sigBytes=u.length*4,this._process(),this._hash},clone:function(){var a=c.clone.call(this);return a._hash=this._hash.clone(),a}});r.SHA1=c._createHelper(o),r.HmacSHA1=c._createHmacHelper(o)}(),e.SHA1})}(dt)),dt.exports}var xt={exports:{}},Tr;function u0(){return Tr||(Tr=1,function(s,t){(function(e,r){s.exports=r(q())})(F,function(e){return function(r){var n=e,i=n.lib,c=i.WordArray,h=i.Hasher,l=n.algo,o=[],a=[];(function(){function x(w){for(var v=r.sqrt(w),_=2;_<=v;_++)if(!(w%_))return!1;return!0}function d(w){return(w-(w|0))*4294967296|0}for(var p=2,g=0;g<64;)x(p)&&(g<8&&(o[g]=d(r.pow(p,1/2))),a[g]=d(r.pow(p,1/3)),g++),p++})();var u=[],f=l.SHA256=h.extend({_doReset:function(){this._hash=new c.init(o.slice(0))},_doProcessBlock:function(x,d){for(var p=this._hash.words,g=p[0],w=p[1],v=p[2],_=p[3],y=p[4],E=p[5],S=p[6],C=p[7],T=0;T<64;T++){if(T<16)u[T]=x[d+T]|0;else{var D=u[T-15],b=(D<<25|D>>>7)^(D<<14|D>>>18)^D>>>3,k=u[T-2],R=(k<<15|k>>>17)^(k<<13|k>>>19)^k>>>10;u[T]=b+u[T-7]+R+u[T-16]}var O=y&E^~y&S,m=g&w^g&v^w&v,B=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),I=(y<<26|y>>>6)^(y<<21|y>>>11)^(y<<7|y>>>25),L=C+I+O+a[T]+u[T],U=B+m;C=S,S=E,E=y,y=_+L|0,_=v,v=w,w=g,g=L+U|0}p[0]=p[0]+g|0,p[1]=p[1]+w|0,p[2]=p[2]+v|0,p[3]=p[3]+_|0,p[4]=p[4]+y|0,p[5]=p[5]+E|0,p[6]=p[6]+S|0,p[7]=p[7]+C|0},_doFinalize:function(){var x=this._data,d=x.words,p=this._nDataBytes*8,g=x.sigBytes*8;return d[g>>>5]|=128<<24-g%32,d[(g+64>>>9<<4)+14]=r.floor(p/4294967296),d[(g+64>>>9<<4)+15]=p,x.sigBytes=d.length*4,this._process(),this._hash},clone:function(){var x=h.clone.call(this);return x._hash=this._hash.clone(),x}});n.SHA256=h._createHelper(f),n.HmacSHA256=h._createHmacHelper(f)}(Math),e.SHA256})}(xt)),xt.exports}var vt={exports:{}},Ar;function Fi(){return Ar||(Ar=1,function(s,t){(function(e,r,n){s.exports=r(q(),u0())})(F,function(e){return function(){var r=e,n=r.lib,i=n.WordArray,c=r.algo,h=c.SHA256,l=c.SHA224=h.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var o=h._doFinalize.call(this);return o.sigBytes-=4,o}});r.SHA224=h._createHelper(l),r.HmacSHA224=h._createHmacHelper(l)}(),e.SHA224})}(vt)),vt.exports}var pt={exports:{}},Rr;function f0(){return Rr||(Rr=1,function(s,t){(function(e,r,n){s.exports=r(q(),Qe())})(F,function(e){return function(){var r=e,n=r.lib,i=n.Hasher,c=r.x64,h=c.Word,l=c.WordArray,o=r.algo;function a(){return h.create.apply(h,arguments)}var u=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],f=[];(function(){for(var d=0;d<80;d++)f[d]=a()})();var x=o.SHA512=i.extend({_doReset:function(){this._hash=new l.init([new h.init(1779033703,4089235720),new h.init(3144134277,2227873595),new h.init(1013904242,4271175723),new h.init(2773480762,1595750129),new h.init(1359893119,2917565137),new h.init(2600822924,725511199),new h.init(528734635,4215389547),new h.init(1541459225,327033209)])},_doProcessBlock:function(d,p){for(var g=this._hash.words,w=g[0],v=g[1],_=g[2],y=g[3],E=g[4],S=g[5],C=g[6],T=g[7],D=w.high,b=w.low,k=v.high,R=v.low,O=_.high,m=_.low,B=y.high,I=y.low,L=E.high,U=E.low,H=S.high,N=S.low,A=C.high,P=C.low,$=T.high,j=T.low,V=D,G=b,Z=k,z=R,Ae=O,me=m,et=B,Re=I,se=L,ee=U,ze=H,Oe=N,qe=A,Pe=P,tt=$,je=j,oe=0;oe<80;oe++){var ne,ue,Ne=f[oe];if(oe<16)ue=Ne.high=d[p+oe*2]|0,ne=Ne.low=d[p+oe*2+1]|0;else{var Yt=f[oe-15],be=Yt.high,$e=Yt.low,v0=(be>>>1|$e<<31)^(be>>>8|$e<<24)^be>>>7,Zt=($e>>>1|be<<31)^($e>>>8|be<<24)^($e>>>7|be<<25),Qt=f[oe-2],we=Qt.high,De=Qt.low,p0=(we>>>19|De<<13)^(we<<3|De>>>29)^we>>>6,er=(De>>>19|we<<13)^(De<<3|we>>>29)^(De>>>6|we<<26),tr=f[oe-7],_0=tr.high,g0=tr.low,rr=f[oe-16],y0=rr.high,nr=rr.low;ne=Zt+g0,ue=v0+_0+(ne>>>0<Zt>>>0?1:0),ne=ne+er,ue=ue+p0+(ne>>>0<er>>>0?1:0),ne=ne+nr,ue=ue+y0+(ne>>>0<nr>>>0?1:0),Ne.high=ue,Ne.low=ne}var m0=se&ze^~se&qe,ir=ee&Oe^~ee&Pe,b0=V&Z^V&Ae^Z&Ae,w0=G&z^G&me^z&me,k0=(V>>>28|G<<4)^(V<<30|G>>>2)^(V<<25|G>>>7),sr=(G>>>28|V<<4)^(G<<30|V>>>2)^(G<<25|V>>>7),E0=(se>>>14|ee<<18)^(se>>>18|ee<<14)^(se<<23|ee>>>9),S0=(ee>>>14|se<<18)^(ee>>>18|se<<14)^(ee<<23|se>>>9),or=u[oe],B0=or.high,ar=or.low,te=je+S0,fe=tt+E0+(te>>>0<je>>>0?1:0),te=te+ir,fe=fe+m0+(te>>>0<ir>>>0?1:0),te=te+ar,fe=fe+B0+(te>>>0<ar>>>0?1:0),te=te+ne,fe=fe+ue+(te>>>0<ne>>>0?1:0),cr=sr+w0,C0=k0+b0+(cr>>>0<sr>>>0?1:0);tt=qe,je=Pe,qe=ze,Pe=Oe,ze=se,Oe=ee,ee=Re+te|0,se=et+fe+(ee>>>0<Re>>>0?1:0)|0,et=Ae,Re=me,Ae=Z,me=z,Z=V,z=G,G=te+cr|0,V=fe+C0+(G>>>0<te>>>0?1:0)|0}b=w.low=b+G,w.high=D+V+(b>>>0<G>>>0?1:0),R=v.low=R+z,v.high=k+Z+(R>>>0<z>>>0?1:0),m=_.low=m+me,_.high=O+Ae+(m>>>0<me>>>0?1:0),I=y.low=I+Re,y.high=B+et+(I>>>0<Re>>>0?1:0),U=E.low=U+ee,E.high=L+se+(U>>>0<ee>>>0?1:0),N=S.low=N+Oe,S.high=H+ze+(N>>>0<Oe>>>0?1:0),P=C.low=P+Pe,C.high=A+qe+(P>>>0<Pe>>>0?1:0),j=T.low=j+je,T.high=$+tt+(j>>>0<je>>>0?1:0)},_doFinalize:function(){var d=this._data,p=d.words,g=this._nDataBytes*8,w=d.sigBytes*8;p[w>>>5]|=128<<24-w%32,p[(w+128>>>10<<5)+30]=Math.floor(g/4294967296),p[(w+128>>>10<<5)+31]=g,d.sigBytes=p.length*4,this._process();var v=this._hash.toX32();return v},clone:function(){var d=i.clone.call(this);return d._hash=this._hash.clone(),d},blockSize:1024/32});r.SHA512=i._createHelper(x),r.HmacSHA512=i._createHmacHelper(x)}(),e.SHA512})}(pt)),pt.exports}var _t={exports:{}},Or;function zi(){return Or||(Or=1,function(s,t){(function(e,r,n){s.exports=r(q(),Qe(),f0())})(F,function(e){return function(){var r=e,n=r.x64,i=n.Word,c=n.WordArray,h=r.algo,l=h.SHA512,o=h.SHA384=l.extend({_doReset:function(){this._hash=new c.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var a=l._doFinalize.call(this);return a.sigBytes-=16,a}});r.SHA384=l._createHelper(o),r.HmacSHA384=l._createHmacHelper(o)}(),e.SHA384})}(_t)),_t.exports}var gt={exports:{}},Pr;function qi(){return Pr||(Pr=1,function(s,t){(function(e,r,n){s.exports=r(q(),Qe())})(F,function(e){return function(r){var n=e,i=n.lib,c=i.WordArray,h=i.Hasher,l=n.x64,o=l.Word,a=n.algo,u=[],f=[],x=[];(function(){for(var g=1,w=0,v=0;v<24;v++){u[g+5*w]=(v+1)*(v+2)/2%64;var _=w%5,y=(2*g+3*w)%5;g=_,w=y}for(var g=0;g<5;g++)for(var w=0;w<5;w++)f[g+5*w]=w+(2*g+3*w)%5*5;for(var E=1,S=0;S<24;S++){for(var C=0,T=0,D=0;D<7;D++){if(E&1){var b=(1<<D)-1;b<32?T^=1<<b:C^=1<<b-32}E&128?E=E<<1^113:E<<=1}x[S]=o.create(C,T)}})();var d=[];(function(){for(var g=0;g<25;g++)d[g]=o.create()})();var p=a.SHA3=h.extend({cfg:h.cfg.extend({outputLength:512}),_doReset:function(){for(var g=this._state=[],w=0;w<25;w++)g[w]=new o.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(g,w){for(var v=this._state,_=this.blockSize/2,y=0;y<_;y++){var E=g[w+2*y],S=g[w+2*y+1];E=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,S=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360;var C=v[y];C.high^=S,C.low^=E}for(var T=0;T<24;T++){for(var D=0;D<5;D++){for(var b=0,k=0,R=0;R<5;R++){var C=v[D+5*R];b^=C.high,k^=C.low}var O=d[D];O.high=b,O.low=k}for(var D=0;D<5;D++)for(var m=d[(D+4)%5],B=d[(D+1)%5],I=B.high,L=B.low,b=m.high^(I<<1|L>>>31),k=m.low^(L<<1|I>>>31),R=0;R<5;R++){var C=v[D+5*R];C.high^=b,C.low^=k}for(var U=1;U<25;U++){var b,k,C=v[U],H=C.high,N=C.low,A=u[U];A<32?(b=H<<A|N>>>32-A,k=N<<A|H>>>32-A):(b=N<<A-32|H>>>64-A,k=H<<A-32|N>>>64-A);var P=d[f[U]];P.high=b,P.low=k}var $=d[0],j=v[0];$.high=j.high,$.low=j.low;for(var D=0;D<5;D++)for(var R=0;R<5;R++){var U=D+5*R,C=v[U],V=d[U],G=d[(D+1)%5+5*R],Z=d[(D+2)%5+5*R];C.high=V.high^~G.high&Z.high,C.low=V.low^~G.low&Z.low}var C=v[0],z=x[T];C.high^=z.high,C.low^=z.low}},_doFinalize:function(){var g=this._data,w=g.words;this._nDataBytes*8;var v=g.sigBytes*8,_=this.blockSize*32;w[v>>>5]|=1<<24-v%32,w[(r.ceil((v+1)/_)*_>>>5)-1]|=128,g.sigBytes=w.length*4,this._process();for(var y=this._state,E=this.cfg.outputLength/8,S=E/8,C=[],T=0;T<S;T++){var D=y[T],b=D.high,k=D.low;b=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,C.push(k),C.push(b)}return new c.init(C,E)},clone:function(){for(var g=h.clone.call(this),w=g._state=this._state.slice(0),v=0;v<25;v++)w[v]=w[v].clone();return g}});n.SHA3=h._createHelper(p),n.HmacSHA3=h._createHmacHelper(p)}(Math),e.SHA3})}(gt)),gt.exports}var yt={exports:{}},jr;function Ni(){return jr||(jr=1,function(s,t){(function(e,r){s.exports=r(q())})(F,function(e){return function(r){var n=e,i=n.lib,c=i.WordArray,h=i.Hasher,l=n.algo,o=c.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),a=c.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=c.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=c.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),x=c.create([0,1518500249,1859775393,2400959708,2840853838]),d=c.create([1352829926,1548603684,1836072691,2053994217,0]),p=l.RIPEMD160=h.extend({_doReset:function(){this._hash=c.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(S,C){for(var T=0;T<16;T++){var D=C+T,b=S[D];S[D]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360}var k=this._hash.words,R=x.words,O=d.words,m=o.words,B=a.words,I=u.words,L=f.words,U,H,N,A,P,$,j,V,G,Z;$=U=k[0],j=H=k[1],V=N=k[2],G=A=k[3],Z=P=k[4];for(var z,T=0;T<80;T+=1)z=U+S[C+m[T]]|0,T<16?z+=g(H,N,A)+R[0]:T<32?z+=w(H,N,A)+R[1]:T<48?z+=v(H,N,A)+R[2]:T<64?z+=_(H,N,A)+R[3]:z+=y(H,N,A)+R[4],z=z|0,z=E(z,I[T]),z=z+P|0,U=P,P=A,A=E(N,10),N=H,H=z,z=$+S[C+B[T]]|0,T<16?z+=y(j,V,G)+O[0]:T<32?z+=_(j,V,G)+O[1]:T<48?z+=v(j,V,G)+O[2]:T<64?z+=w(j,V,G)+O[3]:z+=g(j,V,G)+O[4],z=z|0,z=E(z,L[T]),z=z+Z|0,$=Z,Z=G,G=E(V,10),V=j,j=z;z=k[1]+N+G|0,k[1]=k[2]+A+Z|0,k[2]=k[3]+P+$|0,k[3]=k[4]+U+j|0,k[4]=k[0]+H+V|0,k[0]=z},_doFinalize:function(){var S=this._data,C=S.words,T=this._nDataBytes*8,D=S.sigBytes*8;C[D>>>5]|=128<<24-D%32,C[(D+64>>>9<<4)+14]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,S.sigBytes=(C.length+1)*4,this._process();for(var b=this._hash,k=b.words,R=0;R<5;R++){var O=k[R];k[R]=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360}return b},clone:function(){var S=h.clone.call(this);return S._hash=this._hash.clone(),S}});function g(S,C,T){return S^C^T}function w(S,C,T){return S&C|~S&T}function v(S,C,T){return(S|~C)^T}function _(S,C,T){return S&T|C&~T}function y(S,C,T){return S^(C|~T)}function E(S,C){return S<<C|S>>>32-C}n.RIPEMD160=h._createHelper(p),n.HmacRIPEMD160=h._createHmacHelper(p)}(),e.RIPEMD160})}(yt)),yt.exports}var mt={exports:{}},$r;function Jt(){return $r||($r=1,function(s,t){(function(e,r){s.exports=r(q())})(F,function(e){(function(){var r=e,n=r.lib,i=n.Base,c=r.enc,h=c.Utf8,l=r.algo;l.HMAC=i.extend({init:function(o,a){o=this._hasher=new o.init,typeof a=="string"&&(a=h.parse(a));var u=o.blockSize,f=u*4;a.sigBytes>f&&(a=o.finalize(a)),a.clamp();for(var x=this._oKey=a.clone(),d=this._iKey=a.clone(),p=x.words,g=d.words,w=0;w<u;w++)p[w]^=1549556828,g[w]^=909522486;x.sigBytes=d.sigBytes=f,this.reset()},reset:function(){var o=this._hasher;o.reset(),o.update(this._iKey)},update:function(o){return this._hasher.update(o),this},finalize:function(o){var a=this._hasher,u=a.finalize(o);a.reset();var f=a.finalize(this._oKey.clone().concat(u));return f}})})()})}(mt)),mt.exports}var bt={exports:{}},Dr;function Wi(){return Dr||(Dr=1,function(s,t){(function(e,r,n){s.exports=r(q(),Vt(),Jt())})(F,function(e){return function(){var r=e,n=r.lib,i=n.Base,c=n.WordArray,h=r.algo,l=h.SHA1,o=h.HMAC,a=h.PBKDF2=i.extend({cfg:i.extend({keySize:128/32,hasher:l,iterations:1}),init:function(u){this.cfg=this.cfg.extend(u)},compute:function(u,f){for(var x=this.cfg,d=o.create(x.hasher,u),p=c.create(),g=c.create([1]),w=p.words,v=g.words,_=x.keySize,y=x.iterations;w.length<_;){var E=d.update(f).finalize(g);d.reset();for(var S=E.words,C=S.length,T=E,D=1;D<y;D++){T=d.finalize(T),d.reset();for(var b=T.words,k=0;k<C;k++)S[k]^=b[k]}p.concat(E),v[0]++}return p.sigBytes=_*4,p}});r.PBKDF2=function(u,f,x){return a.create(x).compute(u,f)}}(),e.PBKDF2})}(bt)),bt.exports}var wt={exports:{}},Ir;function ye(){return Ir||(Ir=1,function(s,t){(function(e,r,n){s.exports=r(q(),Vt(),Jt())})(F,function(e){return function(){var r=e,n=r.lib,i=n.Base,c=n.WordArray,h=r.algo,l=h.MD5,o=h.EvpKDF=i.extend({cfg:i.extend({keySize:128/32,hasher:l,iterations:1}),init:function(a){this.cfg=this.cfg.extend(a)},compute:function(a,u){for(var f,x=this.cfg,d=x.hasher.create(),p=c.create(),g=p.words,w=x.keySize,v=x.iterations;g.length<w;){f&&d.update(f),f=d.update(a).finalize(u),d.reset();for(var _=1;_<v;_++)f=d.finalize(f),d.reset();p.concat(f)}return p.sigBytes=w*4,p}});r.EvpKDF=function(a,u,f){return o.create(f).compute(a,u)}}(),e.EvpKDF})}(wt)),wt.exports}var kt={exports:{}},Hr;function J(){return Hr||(Hr=1,function(s,t){(function(e,r,n){s.exports=r(q(),ye())})(F,function(e){e.lib.Cipher||function(r){var n=e,i=n.lib,c=i.Base,h=i.WordArray,l=i.BufferedBlockAlgorithm,o=n.enc;o.Utf8;var a=o.Base64,u=n.algo,f=u.EvpKDF,x=i.Cipher=l.extend({cfg:c.extend(),createEncryptor:function(b,k){return this.create(this._ENC_XFORM_MODE,b,k)},createDecryptor:function(b,k){return this.create(this._DEC_XFORM_MODE,b,k)},init:function(b,k,R){this.cfg=this.cfg.extend(R),this._xformMode=b,this._key=k,this.reset()},reset:function(){l.reset.call(this),this._doReset()},process:function(b){return this._append(b),this._process()},finalize:function(b){b&&this._append(b);var k=this._doFinalize();return k},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function b(k){return typeof k=="string"?D:S}return function(k){return{encrypt:function(R,O,m){return b(O).encrypt(k,R,O,m)},decrypt:function(R,O,m){return b(O).decrypt(k,R,O,m)}}}}()});i.StreamCipher=x.extend({_doFinalize:function(){var b=this._process(!0);return b},blockSize:1});var d=n.mode={},p=i.BlockCipherMode=c.extend({createEncryptor:function(b,k){return this.Encryptor.create(b,k)},createDecryptor:function(b,k){return this.Decryptor.create(b,k)},init:function(b,k){this._cipher=b,this._iv=k}}),g=d.CBC=function(){var b=p.extend();b.Encryptor=b.extend({processBlock:function(R,O){var m=this._cipher,B=m.blockSize;k.call(this,R,O,B),m.encryptBlock(R,O),this._prevBlock=R.slice(O,O+B)}}),b.Decryptor=b.extend({processBlock:function(R,O){var m=this._cipher,B=m.blockSize,I=R.slice(O,O+B);m.decryptBlock(R,O),k.call(this,R,O,B),this._prevBlock=I}});function k(R,O,m){var B,I=this._iv;I?(B=I,this._iv=r):B=this._prevBlock;for(var L=0;L<m;L++)R[O+L]^=B[L]}return b}(),w=n.pad={},v=w.Pkcs7={pad:function(b,k){for(var R=k*4,O=R-b.sigBytes%R,m=O<<24|O<<16|O<<8|O,B=[],I=0;I<O;I+=4)B.push(m);var L=h.create(B,O);b.concat(L)},unpad:function(b){var k=b.words[b.sigBytes-1>>>2]&255;b.sigBytes-=k}};i.BlockCipher=x.extend({cfg:x.cfg.extend({mode:g,padding:v}),reset:function(){var b;x.reset.call(this);var k=this.cfg,R=k.iv,O=k.mode;this._xformMode==this._ENC_XFORM_MODE?b=O.createEncryptor:(b=O.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==b?this._mode.init(this,R&&R.words):(this._mode=b.call(O,this,R&&R.words),this._mode.__creator=b)},_doProcessBlock:function(b,k){this._mode.processBlock(b,k)},_doFinalize:function(){var b,k=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(k.pad(this._data,this.blockSize),b=this._process(!0)):(b=this._process(!0),k.unpad(b)),b},blockSize:128/32});var _=i.CipherParams=c.extend({init:function(b){this.mixIn(b)},toString:function(b){return(b||this.formatter).stringify(this)}}),y=n.format={},E=y.OpenSSL={stringify:function(b){var k,R=b.ciphertext,O=b.salt;return O?k=h.create([1398893684,1701076831]).concat(O).concat(R):k=R,k.toString(a)},parse:function(b){var k,R=a.parse(b),O=R.words;return O[0]==1398893684&&O[1]==1701076831&&(k=h.create(O.slice(2,4)),O.splice(0,4),R.sigBytes-=16),_.create({ciphertext:R,salt:k})}},S=i.SerializableCipher=c.extend({cfg:c.extend({format:E}),encrypt:function(b,k,R,O){O=this.cfg.extend(O);var m=b.createEncryptor(R,O),B=m.finalize(k),I=m.cfg;return _.create({ciphertext:B,key:R,iv:I.iv,algorithm:b,mode:I.mode,padding:I.padding,blockSize:b.blockSize,formatter:O.format})},decrypt:function(b,k,R,O){O=this.cfg.extend(O),k=this._parse(k,O.format);var m=b.createDecryptor(R,O).finalize(k.ciphertext);return m},_parse:function(b,k){return typeof b=="string"?k.parse(b,this):b}}),C=n.kdf={},T=C.OpenSSL={execute:function(b,k,R,O){O||(O=h.random(64/8));var m=f.create({keySize:k+R}).compute(b,O),B=h.create(m.words.slice(k),R*4);return m.sigBytes=k*4,_.create({key:m,iv:B,salt:O})}},D=i.PasswordBasedCipher=S.extend({cfg:S.cfg.extend({kdf:T}),encrypt:function(b,k,R,O){O=this.cfg.extend(O);var m=O.kdf.execute(R,b.keySize,b.ivSize);O.iv=m.iv;var B=S.encrypt.call(this,b,k,m.key,O);return B.mixIn(m),B},decrypt:function(b,k,R,O){O=this.cfg.extend(O),k=this._parse(k,O.format);var m=O.kdf.execute(R,b.keySize,b.ivSize,k.salt);O.iv=m.iv;var B=S.decrypt.call(this,b,k,m.key,O);return B}})}()})}(kt)),kt.exports}var Et={exports:{}},Ur;function Mi(){return Ur||(Ur=1,function(s,t){(function(e,r,n){s.exports=r(q(),J())})(F,function(e){return e.mode.CFB=function(){var r=e.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(i,c){var h=this._cipher,l=h.blockSize;n.call(this,i,c,l,h),this._prevBlock=i.slice(c,c+l)}}),r.Decryptor=r.extend({processBlock:function(i,c){var h=this._cipher,l=h.blockSize,o=i.slice(c,c+l);n.call(this,i,c,l,h),this._prevBlock=o}});function n(i,c,h,l){var o,a=this._iv;a?(o=a.slice(0),this._iv=void 0):o=this._prevBlock,l.encryptBlock(o,0);for(var u=0;u<h;u++)i[c+u]^=o[u]}return r}(),e.mode.CFB})}(Et)),Et.exports}var St={exports:{}},Lr;function Gi(){return Lr||(Lr=1,function(s,t){(function(e,r,n){s.exports=r(q(),J())})(F,function(e){return e.mode.CTR=function(){var r=e.lib.BlockCipherMode.extend(),n=r.Encryptor=r.extend({processBlock:function(i,c){var h=this._cipher,l=h.blockSize,o=this._iv,a=this._counter;o&&(a=this._counter=o.slice(0),this._iv=void 0);var u=a.slice(0);h.encryptBlock(u,0),a[l-1]=a[l-1]+1|0;for(var f=0;f<l;f++)i[c+f]^=u[f]}});return r.Decryptor=n,r}(),e.mode.CTR})}(St)),St.exports}var Bt={exports:{}},Fr;function Ki(){return Fr||(Fr=1,function(s,t){(function(e,r,n){s.exports=r(q(),J())})(F,function(e){return e.mode.CTRGladman=function(){var r=e.lib.BlockCipherMode.extend();function n(h){if((h>>24&255)===255){var l=h>>16&255,o=h>>8&255,a=h&255;l===255?(l=0,o===255?(o=0,a===255?a=0:++a):++o):++l,h=0,h+=l<<16,h+=o<<8,h+=a}else h+=1<<24;return h}function i(h){return(h[0]=n(h[0]))===0&&(h[1]=n(h[1])),h}var c=r.Encryptor=r.extend({processBlock:function(h,l){var o=this._cipher,a=o.blockSize,u=this._iv,f=this._counter;u&&(f=this._counter=u.slice(0),this._iv=void 0),i(f);var x=f.slice(0);o.encryptBlock(x,0);for(var d=0;d<a;d++)h[l+d]^=x[d]}});return r.Decryptor=c,r}(),e.mode.CTRGladman})}(Bt)),Bt.exports}var Ct={exports:{}},zr;function Xi(){return zr||(zr=1,function(s,t){(function(e,r,n){s.exports=r(q(),J())})(F,function(e){return e.mode.OFB=function(){var r=e.lib.BlockCipherMode.extend(),n=r.Encryptor=r.extend({processBlock:function(i,c){var h=this._cipher,l=h.blockSize,o=this._iv,a=this._keystream;o&&(a=this._keystream=o.slice(0),this._iv=void 0),h.encryptBlock(a,0);for(var u=0;u<l;u++)i[c+u]^=a[u]}});return r.Decryptor=n,r}(),e.mode.OFB})}(Ct)),Ct.exports}var Tt={exports:{}},qr;function Vi(){return qr||(qr=1,function(s,t){(function(e,r,n){s.exports=r(q(),J())})(F,function(e){return e.mode.ECB=function(){var r=e.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(n,i){this._cipher.encryptBlock(n,i)}}),r.Decryptor=r.extend({processBlock:function(n,i){this._cipher.decryptBlock(n,i)}}),r}(),e.mode.ECB})}(Tt)),Tt.exports}var At={exports:{}},Nr;function Ji(){return Nr||(Nr=1,function(s,t){(function(e,r,n){s.exports=r(q(),J())})(F,function(e){return e.pad.AnsiX923={pad:function(r,n){var i=r.sigBytes,c=n*4,h=c-i%c,l=i+h-1;r.clamp(),r.words[l>>>2]|=h<<24-l%4*8,r.sigBytes+=h},unpad:function(r){var n=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=n}},e.pad.Ansix923})}(At)),At.exports}var Rt={exports:{}},Wr;function Yi(){return Wr||(Wr=1,function(s,t){(function(e,r,n){s.exports=r(q(),J())})(F,function(e){return e.pad.Iso10126={pad:function(r,n){var i=n*4,c=i-r.sigBytes%i;r.concat(e.lib.WordArray.random(c-1)).concat(e.lib.WordArray.create([c<<24],1))},unpad:function(r){var n=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=n}},e.pad.Iso10126})}(Rt)),Rt.exports}var Ot={exports:{}},Mr;function Zi(){return Mr||(Mr=1,function(s,t){(function(e,r,n){s.exports=r(q(),J())})(F,function(e){return e.pad.Iso97971={pad:function(r,n){r.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(r,n)},unpad:function(r){e.pad.ZeroPadding.unpad(r),r.sigBytes--}},e.pad.Iso97971})}(Ot)),Ot.exports}var Pt={exports:{}},Gr;function Qi(){return Gr||(Gr=1,function(s,t){(function(e,r,n){s.exports=r(q(),J())})(F,function(e){return e.pad.ZeroPadding={pad:function(r,n){var i=n*4;r.clamp(),r.sigBytes+=i-(r.sigBytes%i||i)},unpad:function(r){for(var n=r.words,i=r.sigBytes-1,i=r.sigBytes-1;i>=0;i--)if(n[i>>>2]>>>24-i%4*8&255){r.sigBytes=i+1;break}}},e.pad.ZeroPadding})}(Pt)),Pt.exports}var jt={exports:{}},Kr;function es(){return Kr||(Kr=1,function(s,t){(function(e,r,n){s.exports=r(q(),J())})(F,function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding})}(jt)),jt.exports}var $t={exports:{}},Xr;function ts(){return Xr||(Xr=1,function(s,t){(function(e,r,n){s.exports=r(q(),J())})(F,function(e){return function(r){var n=e,i=n.lib,c=i.CipherParams,h=n.enc,l=h.Hex,o=n.format;o.Hex={stringify:function(a){return a.ciphertext.toString(l)},parse:function(a){var u=l.parse(a);return c.create({ciphertext:u})}}}(),e.format.Hex})}($t)),$t.exports}var Dt={exports:{}},Vr;function rs(){return Vr||(Vr=1,function(s,t){(function(e,r,n){s.exports=r(q(),Ce(),Te(),ye(),J())})(F,function(e){return function(){var r=e,n=r.lib,i=n.BlockCipher,c=r.algo,h=[],l=[],o=[],a=[],u=[],f=[],x=[],d=[],p=[],g=[];(function(){for(var _=[],y=0;y<256;y++)y<128?_[y]=y<<1:_[y]=y<<1^283;for(var E=0,S=0,y=0;y<256;y++){var C=S^S<<1^S<<2^S<<3^S<<4;C=C>>>8^C&255^99,h[E]=C,l[C]=E;var T=_[E],D=_[T],b=_[D],k=_[C]*257^C*16843008;o[E]=k<<24|k>>>8,a[E]=k<<16|k>>>16,u[E]=k<<8|k>>>24,f[E]=k;var k=b*16843009^D*65537^T*257^E*16843008;x[C]=k<<24|k>>>8,d[C]=k<<16|k>>>16,p[C]=k<<8|k>>>24,g[C]=k,E?(E=T^_[_[_[b^T]]],S^=_[_[S]]):E=S=1}})();var w=[0,1,2,4,8,16,32,64,128,27,54],v=c.AES=i.extend({_doReset:function(){var _;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var y=this._keyPriorReset=this._key,E=y.words,S=y.sigBytes/4,C=this._nRounds=S+6,T=(C+1)*4,D=this._keySchedule=[],b=0;b<T;b++)b<S?D[b]=E[b]:(_=D[b-1],b%S?S>6&&b%S==4&&(_=h[_>>>24]<<24|h[_>>>16&255]<<16|h[_>>>8&255]<<8|h[_&255]):(_=_<<8|_>>>24,_=h[_>>>24]<<24|h[_>>>16&255]<<16|h[_>>>8&255]<<8|h[_&255],_^=w[b/S|0]<<24),D[b]=D[b-S]^_);for(var k=this._invKeySchedule=[],R=0;R<T;R++){var b=T-R;if(R%4)var _=D[b];else var _=D[b-4];R<4||b<=4?k[R]=_:k[R]=x[h[_>>>24]]^d[h[_>>>16&255]]^p[h[_>>>8&255]]^g[h[_&255]]}}},encryptBlock:function(_,y){this._doCryptBlock(_,y,this._keySchedule,o,a,u,f,h)},decryptBlock:function(_,y){var E=_[y+1];_[y+1]=_[y+3],_[y+3]=E,this._doCryptBlock(_,y,this._invKeySchedule,x,d,p,g,l);var E=_[y+1];_[y+1]=_[y+3],_[y+3]=E},_doCryptBlock:function(_,y,E,S,C,T,D,b){for(var k=this._nRounds,R=_[y]^E[0],O=_[y+1]^E[1],m=_[y+2]^E[2],B=_[y+3]^E[3],I=4,L=1;L<k;L++){var U=S[R>>>24]^C[O>>>16&255]^T[m>>>8&255]^D[B&255]^E[I++],H=S[O>>>24]^C[m>>>16&255]^T[B>>>8&255]^D[R&255]^E[I++],N=S[m>>>24]^C[B>>>16&255]^T[R>>>8&255]^D[O&255]^E[I++],A=S[B>>>24]^C[R>>>16&255]^T[O>>>8&255]^D[m&255]^E[I++];R=U,O=H,m=N,B=A}var U=(b[R>>>24]<<24|b[O>>>16&255]<<16|b[m>>>8&255]<<8|b[B&255])^E[I++],H=(b[O>>>24]<<24|b[m>>>16&255]<<16|b[B>>>8&255]<<8|b[R&255])^E[I++],N=(b[m>>>24]<<24|b[B>>>16&255]<<16|b[R>>>8&255]<<8|b[O&255])^E[I++],A=(b[B>>>24]<<24|b[R>>>16&255]<<16|b[O>>>8&255]<<8|b[m&255])^E[I++];_[y]=U,_[y+1]=H,_[y+2]=N,_[y+3]=A},keySize:256/32});r.AES=i._createHelper(v)}(),e.AES})}(Dt)),Dt.exports}var It={exports:{}},Jr;function ns(){return Jr||(Jr=1,function(s,t){(function(e,r,n){s.exports=r(q(),Ce(),Te(),ye(),J())})(F,function(e){return function(){var r=e,n=r.lib,i=n.WordArray,c=n.BlockCipher,h=r.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],o=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],a=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],x=h.DES=c.extend({_doReset:function(){for(var w=this._key,v=w.words,_=[],y=0;y<56;y++){var E=l[y]-1;_[y]=v[E>>>5]>>>31-E%32&1}for(var S=this._subKeys=[],C=0;C<16;C++){for(var T=S[C]=[],D=a[C],y=0;y<24;y++)T[y/6|0]|=_[(o[y]-1+D)%28]<<31-y%6,T[4+(y/6|0)]|=_[28+(o[y+24]-1+D)%28]<<31-y%6;T[0]=T[0]<<1|T[0]>>>31;for(var y=1;y<7;y++)T[y]=T[y]>>>(y-1)*4+3;T[7]=T[7]<<5|T[7]>>>27}for(var b=this._invSubKeys=[],y=0;y<16;y++)b[y]=S[15-y]},encryptBlock:function(w,v){this._doCryptBlock(w,v,this._subKeys)},decryptBlock:function(w,v){this._doCryptBlock(w,v,this._invSubKeys)},_doCryptBlock:function(w,v,_){this._lBlock=w[v],this._rBlock=w[v+1],d.call(this,4,252645135),d.call(this,16,65535),p.call(this,2,858993459),p.call(this,8,16711935),d.call(this,1,1431655765);for(var y=0;y<16;y++){for(var E=_[y],S=this._lBlock,C=this._rBlock,T=0,D=0;D<8;D++)T|=u[D][((C^E[D])&f[D])>>>0];this._lBlock=C,this._rBlock=S^T}var b=this._lBlock;this._lBlock=this._rBlock,this._rBlock=b,d.call(this,1,1431655765),p.call(this,8,16711935),p.call(this,2,858993459),d.call(this,16,65535),d.call(this,4,252645135),w[v]=this._lBlock,w[v+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function d(w,v){var _=(this._lBlock>>>w^this._rBlock)&v;this._rBlock^=_,this._lBlock^=_<<w}function p(w,v){var _=(this._rBlock>>>w^this._lBlock)&v;this._lBlock^=_,this._rBlock^=_<<w}r.DES=c._createHelper(x);var g=h.TripleDES=c.extend({_doReset:function(){var w=this._key,v=w.words;if(v.length!==2&&v.length!==4&&v.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var _=v.slice(0,2),y=v.length<4?v.slice(0,2):v.slice(2,4),E=v.length<6?v.slice(0,2):v.slice(4,6);this._des1=x.createEncryptor(i.create(_)),this._des2=x.createEncryptor(i.create(y)),this._des3=x.createEncryptor(i.create(E))},encryptBlock:function(w,v){this._des1.encryptBlock(w,v),this._des2.decryptBlock(w,v),this._des3.encryptBlock(w,v)},decryptBlock:function(w,v){this._des3.decryptBlock(w,v),this._des2.encryptBlock(w,v),this._des1.decryptBlock(w,v)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=c._createHelper(g)}(),e.TripleDES})}(It)),It.exports}var Ht={exports:{}},Yr;function is(){return Yr||(Yr=1,function(s,t){(function(e,r,n){s.exports=r(q(),Ce(),Te(),ye(),J())})(F,function(e){return function(){var r=e,n=r.lib,i=n.StreamCipher,c=r.algo,h=c.RC4=i.extend({_doReset:function(){for(var a=this._key,u=a.words,f=a.sigBytes,x=this._S=[],d=0;d<256;d++)x[d]=d;for(var d=0,p=0;d<256;d++){var g=d%f,w=u[g>>>2]>>>24-g%4*8&255;p=(p+x[d]+w)%256;var v=x[d];x[d]=x[p],x[p]=v}this._i=this._j=0},_doProcessBlock:function(a,u){a[u]^=l.call(this)},keySize:256/32,ivSize:0});function l(){for(var a=this._S,u=this._i,f=this._j,x=0,d=0;d<4;d++){u=(u+1)%256,f=(f+a[u])%256;var p=a[u];a[u]=a[f],a[f]=p,x|=a[(a[u]+a[f])%256]<<24-d*8}return this._i=u,this._j=f,x}r.RC4=i._createHelper(h);var o=c.RC4Drop=h.extend({cfg:h.cfg.extend({drop:192}),_doReset:function(){h._doReset.call(this);for(var a=this.cfg.drop;a>0;a--)l.call(this)}});r.RC4Drop=i._createHelper(o)}(),e.RC4})}(Ht)),Ht.exports}var Ut={exports:{}},Zr;function ss(){return Zr||(Zr=1,function(s,t){(function(e,r,n){s.exports=r(q(),Ce(),Te(),ye(),J())})(F,function(e){return function(){var r=e,n=r.lib,i=n.StreamCipher,c=r.algo,h=[],l=[],o=[],a=c.Rabbit=i.extend({_doReset:function(){for(var f=this._key.words,x=this.cfg.iv,d=0;d<4;d++)f[d]=(f[d]<<8|f[d]>>>24)&16711935|(f[d]<<24|f[d]>>>8)&4278255360;var p=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],g=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var d=0;d<4;d++)u.call(this);for(var d=0;d<8;d++)g[d]^=p[d+4&7];if(x){var w=x.words,v=w[0],_=w[1],y=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,E=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,S=y>>>16|E&4294901760,C=E<<16|y&65535;g[0]^=y,g[1]^=S,g[2]^=E,g[3]^=C,g[4]^=y,g[5]^=S,g[6]^=E,g[7]^=C;for(var d=0;d<4;d++)u.call(this)}},_doProcessBlock:function(f,x){var d=this._X;u.call(this),h[0]=d[0]^d[5]>>>16^d[3]<<16,h[1]=d[2]^d[7]>>>16^d[5]<<16,h[2]=d[4]^d[1]>>>16^d[7]<<16,h[3]=d[6]^d[3]>>>16^d[1]<<16;for(var p=0;p<4;p++)h[p]=(h[p]<<8|h[p]>>>24)&16711935|(h[p]<<24|h[p]>>>8)&4278255360,f[x+p]^=h[p]},blockSize:128/32,ivSize:64/32});function u(){for(var f=this._X,x=this._C,d=0;d<8;d++)l[d]=x[d];x[0]=x[0]+1295307597+this._b|0,x[1]=x[1]+3545052371+(x[0]>>>0<l[0]>>>0?1:0)|0,x[2]=x[2]+886263092+(x[1]>>>0<l[1]>>>0?1:0)|0,x[3]=x[3]+1295307597+(x[2]>>>0<l[2]>>>0?1:0)|0,x[4]=x[4]+3545052371+(x[3]>>>0<l[3]>>>0?1:0)|0,x[5]=x[5]+886263092+(x[4]>>>0<l[4]>>>0?1:0)|0,x[6]=x[6]+1295307597+(x[5]>>>0<l[5]>>>0?1:0)|0,x[7]=x[7]+3545052371+(x[6]>>>0<l[6]>>>0?1:0)|0,this._b=x[7]>>>0<l[7]>>>0?1:0;for(var d=0;d<8;d++){var p=f[d]+x[d],g=p&65535,w=p>>>16,v=((g*g>>>17)+g*w>>>15)+w*w,_=((p&4294901760)*p|0)+((p&65535)*p|0);o[d]=v^_}f[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,f[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,f[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,f[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,f[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,f[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,f[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,f[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}r.Rabbit=i._createHelper(a)}(),e.Rabbit})}(Ut)),Ut.exports}var Lt={exports:{}},Qr;function os(){return Qr||(Qr=1,function(s,t){(function(e,r,n){s.exports=r(q(),Ce(),Te(),ye(),J())})(F,function(e){return function(){var r=e,n=r.lib,i=n.StreamCipher,c=r.algo,h=[],l=[],o=[],a=c.RabbitLegacy=i.extend({_doReset:function(){var f=this._key.words,x=this.cfg.iv,d=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],p=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var g=0;g<4;g++)u.call(this);for(var g=0;g<8;g++)p[g]^=d[g+4&7];if(x){var w=x.words,v=w[0],_=w[1],y=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,E=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,S=y>>>16|E&4294901760,C=E<<16|y&65535;p[0]^=y,p[1]^=S,p[2]^=E,p[3]^=C,p[4]^=y,p[5]^=S,p[6]^=E,p[7]^=C;for(var g=0;g<4;g++)u.call(this)}},_doProcessBlock:function(f,x){var d=this._X;u.call(this),h[0]=d[0]^d[5]>>>16^d[3]<<16,h[1]=d[2]^d[7]>>>16^d[5]<<16,h[2]=d[4]^d[1]>>>16^d[7]<<16,h[3]=d[6]^d[3]>>>16^d[1]<<16;for(var p=0;p<4;p++)h[p]=(h[p]<<8|h[p]>>>24)&16711935|(h[p]<<24|h[p]>>>8)&4278255360,f[x+p]^=h[p]},blockSize:128/32,ivSize:64/32});function u(){for(var f=this._X,x=this._C,d=0;d<8;d++)l[d]=x[d];x[0]=x[0]+1295307597+this._b|0,x[1]=x[1]+3545052371+(x[0]>>>0<l[0]>>>0?1:0)|0,x[2]=x[2]+886263092+(x[1]>>>0<l[1]>>>0?1:0)|0,x[3]=x[3]+1295307597+(x[2]>>>0<l[2]>>>0?1:0)|0,x[4]=x[4]+3545052371+(x[3]>>>0<l[3]>>>0?1:0)|0,x[5]=x[5]+886263092+(x[4]>>>0<l[4]>>>0?1:0)|0,x[6]=x[6]+1295307597+(x[5]>>>0<l[5]>>>0?1:0)|0,x[7]=x[7]+3545052371+(x[6]>>>0<l[6]>>>0?1:0)|0,this._b=x[7]>>>0<l[7]>>>0?1:0;for(var d=0;d<8;d++){var p=f[d]+x[d],g=p&65535,w=p>>>16,v=((g*g>>>17)+g*w>>>15)+w*w,_=((p&4294901760)*p|0)+((p&65535)*p|0);o[d]=v^_}f[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,f[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,f[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,f[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,f[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,f[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,f[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,f[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}r.RabbitLegacy=i._createHelper(a)}(),e.RabbitLegacy})}(Lt)),Lt.exports}(function(s,t){(function(e,r,n){s.exports=r(q(),Qe(),Hi(),Ui(),Ce(),Li(),Te(),Vt(),u0(),Fi(),f0(),zi(),qi(),Ni(),Jt(),Wi(),ye(),J(),Mi(),Gi(),Ki(),Xi(),Vi(),Ji(),Yi(),Zi(),Qi(),es(),ts(),rs(),ns(),is(),ss(),os())})(F,function(e){return e})})(l0);const d0=l0.exports,as="https://vrvybashmqzmnityvcky.supabase.co",cs="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZydnliYXNobXF6bW5pdHl2Y2t5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2NzA1OTQ0NTEsImV4cCI6MTk4NjE3MDQ1MX0.oLJGyqjiw9gssNHBiPBpmu_bC-GH6S7ap03LDQ638FM",Y=Pi(as,cs),x0="WeiJ",us=async({nickname:s,email:t,password:e})=>{let{data:r,error:n}=await Y.from("Users").select("email").eq("email",t);if(n)return{isSuccess:!1,message:error1.message};if(r.length>0)return{isSuccess:!1,message:"email已註冊"};e=d0.HmacSHA256(e,x0).toString();let{data:i,error:c}=await Y.from("Users").insert({id:Xt(),nickname:s,email:t,password:e}).select();return c?{isSuccess:!1,message:error1.message}:(i[0].password="",{isSuccess:!0,message:"註冊成功",userInfo:i[0]})},fs=async({email:s,password:t})=>{t=d0.HmacSHA256(t,x0).toString();let{data:e,error:r}=await Y.from("Users").select("*").eq("email",s).eq("password",t);return r?{isSuccess:!1,message:r.message}:e.length===0?{isSuccess:!1,message:"帳號或密碼錯誤"}:{isSuccess:!0,message:"登入成功",userInfo:e[0]}},ds=async s=>{let t,e;if(s){let r=de(),n=await Y.from("Views").select("*").eq("userId",r.id);t=n.data,e=n.error}else{let r=await Y.from("Views").select("*");t=r.data,e=r.error}return e?{isSuccess:!1,message:e.message}:{isSuccess:!0,message:"取得景點成功",views:t}},xs=async s=>{let t,e,r;return de()?(r=await Y.from("Views").select("*, Collects(userId)").eq("id",s).eq("Collects.userId",de().id),t=r.data,e=r.error):(r=await Y.from("Views").select().eq("id",s),t=r.data,e=r.error),e?{isSuccess:!1,message:e.message}:t.length===0?{isSuccess:!1,message:"該筆景點不存在"}:(de(),{isSuccess:!0,message:"取得景點成功",view:t[0]})},vs=async s=>{const{name:t,content:e,image:r}=s;console.log(s);const n=de(),i=Xt();let{data:c,error:h}=await Y.from("Views").insert({id:i,name:t,content:e,image:r,userId:n.id});return h?{isSuccess:!1,message:h.message}:{isSuccess:!0,message:"新增景點成功",viewID:i}},ps=async s=>{const{id:t,name:e,content:r,image:n}=s;let{data:i,error:c}=await Y.from("Views").update({name:e,content:r,image:n}).eq("id",t).select();return c?{isSuccess:!1,message:c.message}:{isSuccess:!0,message:"更新景點成功",viewID:i[0].id}},_s=async s=>{let t=de(),{data:e,error:r}=await Y.from("Collects").delete().eq("viewId",s);return e=await Y.from("Views").delete().eq("id",s).eq("userId",t.id),r=e.error,r?{isSuccess:!1,message:r.message}:{isSuccess:!0,message:"刪除成功"}},gs=async s=>{let t=de(),e=!1,{data:r,error:n}=await Y.from("Collects").select("*").eq("userId",t.id).eq("viewId",s);if(r.length>0&&(e=!0),e){let{data:i,error:c}=await Y.from("Collects").delete().eq("userId",t.id).eq("viewId",s);return c?{isSuccess:!1,message:c.message}:{isSuccess:!0,message:"取消收藏景點成功"}}return r=await Y.from("Collects").insert({id:Xt(),userId:t.id,viewId:s}),n=r.error,n?{isSuccess:!1,message:n.message}:{isSuccess:!0,message:"收藏景點成功"}},ys=async()=>{let s=de(),{data:t,error:e}=await Y.from("Collects").select("Views(id, name, content, image)").eq("userId",s.id);return e?{isSuccess:!1,message:e.message}:{isSuccess:!0,message:"取得收藏景點成功",collects:t}};export{A0 as a,F as b,hs as c,_s as d,us as e,xs as f,ds as g,gs as h,ls as i,vs as j,ys as k,fs as s,ps as u};
